"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[47475],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(n),d=l,k=c["".concat(i,".").concat(d)]||c[d]||m[d]||r;return n?a.createElement(k,o(o({ref:t},u),{},{components:n})):a.createElement(k,o({ref:t},u))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:l,o[1]=p;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},76644:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var a=n(87462),l=(n(67294),n(3905));const r={title:"\u57fa\u7840\u4f7f\u7528\u6307\u5357",language:"zh-CN"},o=void 0,p={unversionedId:"data-table/basic-usage",id:"version-dev/data-table/basic-usage",title:"\u57fa\u7840\u4f7f\u7528\u6307\u5357",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-dev/data-table/basic-usage.md",sourceDirName:"data-table",slug:"/data-table/basic-usage",permalink:"/zh-CN/docs/dev/data-table/basic-usage",draft:!1,tags:[],version:"dev",frontMatter:{title:"\u57fa\u7840\u4f7f\u7528\u6307\u5357",language:"zh-CN"},sidebar:"docs",previous:{title:"\u6570\u636e\u5212\u5206",permalink:"/zh-CN/docs/dev/data-table/data-partition"},next:{title:"\u9ad8\u7ea7\u4f7f\u7528\u6307\u5357",permalink:"/zh-CN/docs/dev/data-table/advance-usage"}},i={},s=[{value:"\u521b\u5efa\u7528\u6237",id:"\u521b\u5efa\u7528\u6237",level:2},{value:"Root\u7528\u6237\u767b\u5f55\u4e0e\u5bc6\u7801\u4fee\u6539",id:"root\u7528\u6237\u767b\u5f55\u4e0e\u5bc6\u7801\u4fee\u6539",level:3},{value:"\u521b\u5efa\u65b0\u7528\u6237",id:"\u521b\u5efa\u65b0\u7528\u6237",level:3},{value:"\u6570\u636e\u8868\u7684\u521b\u5efa\u4e0e\u6570\u636e\u5bfc\u5165",id:"\u6570\u636e\u8868\u7684\u521b\u5efa\u4e0e\u6570\u636e\u5bfc\u5165",level:2},{value:"\u521b\u5efa\u6570\u636e\u5e93",id:"\u521b\u5efa\u6570\u636e\u5e93",level:3},{value:"\u8d26\u6237\u6388\u6743",id:"\u8d26\u6237\u6388\u6743",level:3},{value:"\u5efa\u8868",id:"\u5efa\u8868",level:3},{value:"\u5355\u5206\u533a",id:"\u5355\u5206\u533a",level:4},{value:"\u590d\u5408\u5206\u533a",id:"\u590d\u5408\u5206\u533a",level:4},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e",level:3},{value:"\u6d41\u5f0f\u5bfc\u5165",id:"\u6d41\u5f0f\u5bfc\u5165",level:4},{value:"Broker \u5bfc\u5165",id:"broker-\u5bfc\u5165",level:4},{value:"\u6570\u636e\u7684\u67e5\u8be2",id:"\u6570\u636e\u7684\u67e5\u8be2",level:2},{value:"\u7b80\u5355\u67e5\u8be2",id:"\u7b80\u5355\u67e5\u8be2",level:3},{value:"Join \u67e5\u8be2",id:"join-\u67e5\u8be2",level:3},{value:"\u5b50\u67e5\u8be2",id:"\u5b50\u67e5\u8be2",level:3}],u={toc:s};function m(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u57fa\u7840\u4f7f\u7528\u6307\u5357"},"\u57fa\u7840\u4f7f\u7528\u6307\u5357"),(0,l.kt)("p",null,"Doris \u91c7\u7528 MySQL \u534f\u8bae\u8fdb\u884c\u901a\u4fe1\uff0c\u7528\u6237\u53ef\u901a\u8fc7 MySQL client \u6216\u8005 MySQL JDBC\u8fde\u63a5\u5230 Doris \u96c6\u7fa4\u3002\u9009\u62e9 MySQL client \u7248\u672c\u65f6\u5efa\u8bae\u91c7\u75285.1 \u4e4b\u540e\u7684\u7248\u672c\uff0c\u56e0\u4e3a 5.1 \u4e4b\u524d\u4e0d\u80fd\u652f\u6301\u957f\u5ea6\u8d85\u8fc7 16 \u4e2a\u5b57\u7b26\u7684\u7528\u6237\u540d\u3002\u672c\u6587\u4ee5 MySQL client \u4e3a\u4f8b\uff0c\u901a\u8fc7\u4e00\u4e2a\u5b8c\u6574\u7684\u6d41\u7a0b\u5411\u7528\u6237\u5c55\u793a Doris \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002"),(0,l.kt)("h2",{id:"\u521b\u5efa\u7528\u6237"},"\u521b\u5efa\u7528\u6237"),(0,l.kt)("h3",{id:"root\u7528\u6237\u767b\u5f55\u4e0e\u5bc6\u7801\u4fee\u6539"},"Root\u7528\u6237\u767b\u5f55\u4e0e\u5bc6\u7801\u4fee\u6539"),(0,l.kt)("p",null,"Doris \u5185\u7f6e root \u548c admin \u7528\u6237\uff0c\u5bc6\u7801\u9ed8\u8ba4\u90fd\u4e3a\u7a7a\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5907\u6ce8\uff1a"),(0,l.kt)("p",{parentName:"blockquote"},"Doris \u63d0\u4f9b\u7684\u9ed8\u8ba4 root \u548c admin \u7528\u6237\u662f\u7ba1\u7406\u5458\u7528\u6237"),(0,l.kt)("p",{parentName:"blockquote"},"root \u7528\u6237\u9ed8\u8ba4\u62e5\u6709\u96c6\u7fa4\u6240\u6709\u6743\u9650\u3002\u540c\u65f6\u62e5\u6709 Grant_priv \u548c Node_priv \u7684\u7528\u6237\uff0c\u53ef\u4ee5\u5c06\u8be5\u6743\u9650\u8d4b\u4e88\u5176\u4ed6\u7528\u6237\uff0c\u62e5\u6709\u8282\u70b9\u53d8\u66f4\u6743\u9650\uff0c\u5305\u62ec FE\u3001BE\u3001BROKER \u8282\u70b9\u7684\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4e0b\u7ebf\u7b49\u64cd\u4f5c\u3002"),(0,l.kt)("p",{parentName:"blockquote"},"admin\u7528\u6237\u62e5\u6709 ADMIN_PRIV \u548c GRANT_PRIV \u6743\u9650"),(0,l.kt)("p",{parentName:"blockquote"},"\u5173\u4e8e\u6743\u9650\u8fd9\u5757\u7684\u5177\u4f53\u8bf4\u660e\u53ef\u4ee5\u53c2\u7167",(0,l.kt)("a",{parentName:"p",href:"/docs/admin-manual/privilege-ldap/user-privilege"},"\u6743\u9650\u7ba1\u7406"))),(0,l.kt)("p",null,"\u542f\u52a8\u5b8c Doris \u7a0b\u5e8f\u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7 root \u6216 admin \u7528\u6237\u8fde\u63a5\u5230 Doris \u96c6\u7fa4\u3002 \u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u5373\u53ef\u767b\u5f55 Doris\uff0c\u767b\u5f55\u540e\u8fdb\u5165\u5230Doris\u5bf9\u5e94\u7684Mysql\u547d\u4ee4\u884c\u64cd\u4f5c\u754c\u9762\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@doris ~]# mysql  -h FE_HOST -P9030 -uroot\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 41\nServer version: 5.1.0 Doris version 1.0.0-preview2-b48ee2734\n\nCopyright (c) 2000, 2022, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"FE_HOST")," \u662f\u4efb\u4e00FE\u8282\u70b9\u7684IP\u5730\u5740\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"9030")," \u662ffe.conf \u4e2d\u7684 query_port \u914d\u7f6e\uff1b")),(0,l.kt)("p",null,"\u767b\u5f55\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539root\u5bc6\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-mysql"},"mysql> SET PASSWORD FOR 'root' = PASSWORD('your_password');\nQuery OK, 0 rows affected (0.00 sec)\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"your_password"),"\u662f\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"root"),"\u7528\u6237\u8bbe\u7f6e\u7684\u65b0\u5bc6\u7801\uff0c\u53ef\u4ee5\u968f\u610f\u8bbe\u7f6e\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u5f3a\u5bc6\u7801\u589e\u52a0\u5b89\u5168\u6027\uff0c\u4e0b\u6b21\u767b\u5f55\u5c31\u7528\u65b0\u5bc6\u7801\u767b\u5f55\u3002")),(0,l.kt)("h3",{id:"\u521b\u5efa\u65b0\u7528\u6237"},"\u521b\u5efa\u65b0\u7528\u6237"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u7528\u6237",(0,l.kt)("inlineCode",{parentName:"p"},"test"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"mysql> CREATE USER 'test' IDENTIFIED BY 'test_passwd';\nQuery OK, 0 rows affected (0.00 sec)\n")),(0,l.kt)("p",null,"\u540e\u7eed\u767b\u5f55\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u94fe\u63a5\u547d\u4ee4\u767b\u5f55\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"[root@doris ~]# mysql -h FE_HOST -P9030 -utest -ptest_passwd\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a\u65b0\u521b\u5efa\u7684\u666e\u901a\u7528\u6237\u9ed8\u8ba4\u6ca1\u6709\u4efb\u4f55\u6743\u9650\uff0c\u6743\u9650\u6388\u4e88\u53ef\u4ee5\u53c2\u8003\u540e\u9762\u7684\u6743\u9650\u6388\u4e88\u3002")),(0,l.kt)("h2",{id:"\u6570\u636e\u8868\u7684\u521b\u5efa\u4e0e\u6570\u636e\u5bfc\u5165"},"\u6570\u636e\u8868\u7684\u521b\u5efa\u4e0e\u6570\u636e\u5bfc\u5165"),(0,l.kt)("h3",{id:"\u521b\u5efa\u6570\u636e\u5e93"},"\u521b\u5efa\u6570\u636e\u5e93"),(0,l.kt)("p",null,"\u521d\u59cb\u53ef\u4ee5\u901a\u8fc7 root \u6216 admin \u7528\u6237\u521b\u5efa\u6570\u636e\u5e93\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE example_db;\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6240\u6709\u547d\u4ee4\u90fd\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"HELP command;")," \u67e5\u770b\u5230\u8be6\u7ec6\u7684\u8bed\u6cd5\u5e2e\u52a9\uff0c\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"HELP CREATE DATABASE;"),"\u3002\u4e5f\u53ef\u4ee5\u67e5\u9605\u5b98\u7f51 ",(0,l.kt)("a",{parentName:"p",href:"/zh-CN/docs/dev/sql-manual/sql-reference/Show-Statements/SHOW-CREATE-DATABASE"},"SHOW CREATE DATABASE")," \u547d\u4ee4\u624b\u518c\u3002"),(0,l.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u4e0d\u6e05\u695a\u547d\u4ee4\u7684\u5168\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528 \"help \u547d\u4ee4\u67d0\u4e00\u5b57\u6bb5\" \u8fdb\u884c\u6a21\u7cca\u67e5\u8be2\u3002\u5982\u952e\u5165 'HELP CREATE'\uff0c\u53ef\u4ee5\u5339\u914d\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"CREATE DATABASE"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"CREATE TABLE"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"CREATE USER")," \u7b49\u547d\u4ee4\u3002"),(0,l.kt)("pre",{parentName:"blockquote"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> HELP CREATE;\nMany help items for your request exist.\nTo make a more specific request, please type 'help <item>',\nwhere <item> is one of the following\ntopics:\n   CREATE CLUSTER\n   CREATE DATABASE\n   CREATE ENCRYPTKEY\n   CREATE FILE\n   CREATE FUNCTION\n   CREATE INDEX\n   CREATE MATERIALIZED VIEW\n   CREATE REPOSITORY\n   CREATE RESOURCE\n   CREATE ROLE\n   CREATE SYNC JOB\n   CREATE TABLE\n   CREATE USER\n   CREATE VIEW\n   ROUTINE LOAD\n   SHOW CREATE FUNCTION\n   SHOW CREATE ROUTINE LOAD\n"))),(0,l.kt)("p",null,"\u6570\u636e\u5e93\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("a",{parentName:"p",href:"../sql-manual/sql-reference/Show-Statements/SHOW-DATABASES.html#show-databases"},"SHOW DATABASES")," \u67e5\u770b\u6570\u636e\u5e93\u4fe1\u606f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| example_db         |\n| information_schema |\n+--------------------+\n2 rows in set (0.00 sec)\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"information_schema\u6570\u636e\u5e93\u662f\u4e3a\u4e86\u517c\u5bb9MySQL\u534f\u8bae\u800c\u5b58\u5728\uff0c\u5b9e\u9645\u4e2d\u4fe1\u606f\u53ef\u80fd\u4e0d\u662f\u5f88\u51c6\u786e\uff0c\u6240\u4ee5\u5173\u4e8e\u5177\u4f53\u6570\u636e\u5e93\u7684\u4fe1\u606f\u5efa\u8bae\u901a\u8fc7\u76f4\u63a5\u67e5\u8be2\u76f8\u5e94\u6570\u636e\u5e93\u800c\u83b7\u5f97\u3002")),(0,l.kt)("h3",{id:"\u8d26\u6237\u6388\u6743"},"\u8d26\u6237\u6388\u6743"),(0,l.kt)("p",null,"example_db \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7 root/admin \u8d26\u6237\u4f7f\u7528",(0,l.kt)("a",{parentName:"p",href:"/zh-CN/docs/dev/sql-manual/sql-reference/Account-Management-Statements/GRANT"},"GRANT"),"\u547d\u4ee4\u5c06 example_db \u8bfb\u5199\u6743\u9650\u6388\u6743\u7ed9\u666e\u901a\u8d26\u6237\uff0c\u5982 test\u3002\u6388\u6743\u4e4b\u540e\u91c7\u7528 test \u8d26\u6237\u767b\u5f55\u5c31\u53ef\u4ee5\u64cd\u4f5c example_db \u6570\u636e\u5e93\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> GRANT ALL ON example_db TO test;\nQuery OK, 0 rows affected (0.01 sec)\n")),(0,l.kt)("h3",{id:"\u5efa\u8868"},"\u5efa\u8868"),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE"},"CREATE TABLE")," \u547d\u4ee4\u5efa\u7acb\u4e00\u4e2a\u8868(Table)\u3002\u66f4\u591a\u8be6\u7ec6\u53c2\u6570\u53ef\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"p"},"HELP CREATE TABLE;"),"\t\t"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528",(0,l.kt)("a",{parentName:"p",href:"/zh-CN/docs/dev/sql-manual/sql-reference/Utility-Statements/USE"},"USE"),"\u547d\u4ee4\u6765\u5207\u6362\u6570\u636e\u5e93\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> USE example_db;\nDatabase changed\n")),(0,l.kt)("p",null,"Doris\u652f\u6301",(0,l.kt)("a",{parentName:"p",href:"data-partition.html#%E5%A4%8D%E5%90%88%E5%88%86%E5%8C%BA%E4%B8%8E%E5%8D%95%E5%88%86%E5%8C%BA"},"\u590d\u5408\u5206\u533a\u548c\u5355\u5206\u533a"),"\u4e24\u79cd\u5efa\u8868\u65b9\u5f0f\u3002\u4e0b\u9762\u4ee5\u805a\u5408\u6a21\u578b\u4e3a\u4f8b\uff0c\u5206\u522b\u6f14\u793a\u5982\u4f55\u521b\u5efa\u4e24\u79cd\u5206\u533a\u7684\u6570\u636e\u8868\u3002"),(0,l.kt)("h4",{id:"\u5355\u5206\u533a"},"\u5355\u5206\u533a"),(0,l.kt)("p",null,"\u5efa\u7acb\u4e00\u4e2a\u540d\u5b57\u4e3a table1 \u7684\u903b\u8f91\u8868\u3002\u5206\u6876\u5217\u4e3a siteid\uff0c\u6876\u6570\u4e3a 10\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u8868\u7684 schema \u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"siteid\uff1a\u7c7b\u578b\u662fINT\uff084\u5b57\u8282\uff09, \u9ed8\u8ba4\u503c\u4e3a10"),(0,l.kt)("li",{parentName:"ul"},"citycode\uff1a\u7c7b\u578b\u662fSMALLINT\uff082\u5b57\u8282\uff09"),(0,l.kt)("li",{parentName:"ul"},"username\uff1a\u7c7b\u578b\u662fVARCHAR, \u6700\u5927\u957f\u5ea6\u4e3a32, \u9ed8\u8ba4\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ul"},"pv\uff1a\u7c7b\u578b\u662fBIGINT\uff088\u5b57\u8282\uff09, \u9ed8\u8ba4\u503c\u662f0; \u8fd9\u662f\u4e00\u4e2a\u6307\u6807\u5217, Doris\u5185\u90e8\u4f1a\u5bf9\u6307\u6807\u5217\u505a\u805a\u5408\u64cd\u4f5c, \u8fd9\u4e2a\u5217\u7684\u805a\u5408\u65b9\u6cd5\u662f\u6c42\u548c\uff08SUM\uff09")),(0,l.kt)("p",null,"\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table1\n(\n    siteid INT DEFAULT '10',\n    citycode SMALLINT,\n    username VARCHAR(32) DEFAULT '',\n    pv BIGINT SUM DEFAULT '0'\n)\nAGGREGATE KEY(siteid, citycode, username)\nDISTRIBUTED BY HASH(siteid) BUCKETS 10\nPROPERTIES(\"replication_num\" = \"1\");\n")),(0,l.kt)("h4",{id:"\u590d\u5408\u5206\u533a"},"\u590d\u5408\u5206\u533a"),(0,l.kt)("p",null,"\u5efa\u7acb\u4e00\u4e2a\u540d\u5b57\u4e3a table2 \u7684\u903b\u8f91\u8868\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u8868\u7684 schema \u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"event_day\uff1a\u7c7b\u578b\u662fDATE\uff0c\u65e0\u9ed8\u8ba4\u503c"),(0,l.kt)("li",{parentName:"ul"},"siteid\uff1a\u7c7b\u578b\u662fINT\uff084\u5b57\u8282\uff09, \u9ed8\u8ba4\u503c\u4e3a10"),(0,l.kt)("li",{parentName:"ul"},"citycode\uff1a\u7c7b\u578b\u662fSMALLINT\uff082\u5b57\u8282\uff09"),(0,l.kt)("li",{parentName:"ul"},"username\uff1a\u7c7b\u578b\u662fVARCHAR, \u6700\u5927\u957f\u5ea6\u4e3a32, \u9ed8\u8ba4\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ul"},"pv\uff1a\u7c7b\u578b\u662fBIGINT\uff088\u5b57\u8282\uff09, \u9ed8\u8ba4\u503c\u662f0; \u8fd9\u662f\u4e00\u4e2a\u6307\u6807\u5217, Doris \u5185\u90e8\u4f1a\u5bf9\u6307\u6807\u5217\u505a\u805a\u5408\u64cd\u4f5c, \u8fd9\u4e2a\u5217\u7684\u805a\u5408\u65b9\u6cd5\u662f\u6c42\u548c\uff08SUM\uff09")),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528 event_day \u5217\u4f5c\u4e3a\u5206\u533a\u5217\uff0c\u5efa\u7acb3\u4e2a\u5206\u533a: p201706, p201707, p201708"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"p201706\uff1a\u8303\u56f4\u4e3a [\u6700\u5c0f\u503c, 2017-07-01)"),(0,l.kt)("li",{parentName:"ul"},"p201707\uff1a\u8303\u56f4\u4e3a [2017-07-01, 2017-08-01)"),(0,l.kt)("li",{parentName:"ul"},"p201708\uff1a\u8303\u56f4\u4e3a [2017-08-01, 2017-09-01)")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\u533a\u95f4\u4e3a\u5de6\u95ed\u53f3\u5f00\u3002")),(0,l.kt)("p",null,"\u6bcf\u4e2a\u5206\u533a\u4f7f\u7528 siteid \u8fdb\u884c\u54c8\u5e0c\u5206\u6876\uff0c\u6876\u6570\u4e3a10"),(0,l.kt)("p",null,"\u5efa\u8868\u8bed\u53e5\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE table2\n(\n    event_day DATE,\n    siteid INT DEFAULT '10',\n    citycode SMALLINT,\n    username VARCHAR(32) DEFAULT '',\n    pv BIGINT SUM DEFAULT '0'\n)\nAGGREGATE KEY(event_day, siteid, citycode, username)\nPARTITION BY RANGE(event_day)\n(\n    PARTITION p201706 VALUES LESS THAN ('2017-07-01'),\n    PARTITION p201707 VALUES LESS THAN ('2017-08-01'),\n    PARTITION p201708 VALUES LESS THAN ('2017-09-01')\n)\nDISTRIBUTED BY HASH(siteid) BUCKETS 10\nPROPERTIES(\"replication_num\" = \"1\");\n")),(0,l.kt)("p",null,"\u6570\u636e\u8868\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u67e5\u770b example_db \u4e2d\u8868\u7684\u4fe1\u606f:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SHOW TABLES;\n+----------------------+\n| Tables_in_example_db |\n+----------------------+\n| table1               |\n| table2               |\n+----------------------+\n2 rows in set (0.01 sec)\n\nmysql> DESC table1;\n+----------+-------------+------+-------+---------+-------+\n| Field    | Type        | Null | Key   | Default | Extra |\n+----------+-------------+------+-------+---------+-------+\n| siteid   | int(11)     | Yes  | true  | 10      |       |\n| citycode | smallint(6) | Yes  | true  | N/A     |       |\n| username | varchar(32) | Yes  | true  |         |       |\n| pv       | bigint(20)  | Yes  | false | 0       | SUM   |\n+----------+-------------+------+-------+---------+-------+\n4 rows in set (0.00 sec)\n\nmysql> DESC table2;\n+-----------+-------------+------+-------+---------+-------+\n| Field     | Type        | Null | Key   | Default | Extra |\n+-----------+-------------+------+-------+---------+-------+\n| event_day | date        | Yes  | true  | N/A     |       |\n| siteid    | int(11)     | Yes  | true  | 10      |       |\n| citycode  | smallint(6) | Yes  | true  | N/A     |       |\n| username  | varchar(32) | Yes  | true  |         |       |\n| pv        | bigint(20)  | Yes  | false | 0       | SUM   |\n+-----------+-------------+------+-------+---------+-------+\n5 rows in set (0.00 sec)\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\u4e8b\u9879\uff1a")),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u4e0a\u8ff0\u8868\u901a\u8fc7\u8bbe\u7f6e replication_num \u5efa\u7684\u90fd\u662f\u5355\u526f\u672c\u7684\u8868\uff0cDoris\u5efa\u8bae\u7528\u6237\u91c7\u7528\u9ed8\u8ba4\u7684 3 \u526f\u672c\u8bbe\u7f6e\uff0c\u4ee5\u4fdd\u8bc1\u9ad8\u53ef\u7528\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u5bf9\u590d\u5408\u5206\u533a\u8868\u52a8\u6001\u7684\u589e\u5220\u5206\u533a\uff0c\u8be6\u89c1 ",(0,l.kt)("inlineCode",{parentName:"li"},"HELP ALTER TABLE;")," \u4e2d Partition \u76f8\u5173\u90e8\u5206\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6570\u636e\u5bfc\u5165\u53ef\u4ee5\u5bfc\u5165\u6307\u5b9a\u7684 Partition\uff0c\u8be6\u89c1 ",(0,l.kt)("inlineCode",{parentName:"li"},"HELP LOAD;"),"\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u52a8\u6001\u4fee\u6539\u8868\u7684 Schema\uff0c\u8be6\u89c1",(0,l.kt)("inlineCode",{parentName:"li"},"HELP ALTER TABLE;"),"\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u5bf9 Table \u589e\u52a0\u4e0a\u5377\u8868\uff08Rollup\uff09\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u53c2\u89c1\u9ad8\u7ea7\u4f7f\u7528\u6307\u5357\u5173\u4e8e Rollup \u7684\u63cf\u8ff0\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8868\u7684\u5217\u7684Null\u5c5e\u6027\u9ed8\u8ba4\u4e3atrue\uff0c\u4f1a\u5bf9\u67e5\u8be2\u6027\u80fd\u6709\u4e00\u5b9a\u7684\u5f71\u54cd\u3002"))),(0,l.kt)("h3",{id:"\u5bfc\u5165\u6570\u636e"},"\u5bfc\u5165\u6570\u636e"),(0,l.kt)("p",null,"Doris \u652f\u6301\u591a\u79cd\u6570\u636e\u5bfc\u5165\u65b9\u5f0f\u3002\u5177\u4f53\u53ef\u4ee5\u53c2\u9605",(0,l.kt)("a",{parentName:"p",href:"/zh-CN/docs/dev/data-operate/import/load-manual"},"\u6570\u636e\u5bfc\u5165"),"\u6587\u6863\u3002\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u6d41\u5f0f\u5bfc\u5165\u548c Broker \u5bfc\u5165\u505a\u793a\u4f8b\u3002"),(0,l.kt)("h4",{id:"\u6d41\u5f0f\u5bfc\u5165"},"\u6d41\u5f0f\u5bfc\u5165"),(0,l.kt)("p",null,"\u6d41\u5f0f\u5bfc\u5165\u901a\u8fc7 HTTP \u534f\u8bae\u5411 Doris \u4f20\u8f93\u6570\u636e\uff0c\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u5176\u4ed6\u7cfb\u7edf\u6216\u7ec4\u4ef6\u76f4\u63a5\u5bfc\u5165\u672c\u5730\u6570\u636e\u3002\u8be6\u7ec6\u8bed\u6cd5\u5e2e\u52a9\u53ef\u4ee5\u53c2\u9605 ",(0,l.kt)("inlineCode",{parentName:"p"},"HELP STREAM LOAD;"),"\u3002"),(0,l.kt)("p",null,'\u793a\u4f8b1\uff1a\u4ee5 "table1_20170707" \u4e3a Label\uff0c\u4f7f\u7528\u672c\u5730\u6587\u4ef6 table1_data \u5bfc\u5165 table1 \u8868\u3002'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location-trusted -u test:test_passwd -H "label:table1_20170707" -H "column_separator:," -T table1_data http://FE_HOST:8030/api/example_db/table1/_stream_load\n')),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"FE_HOST \u662f\u4efb\u4e00 FE \u6240\u5728\u8282\u70b9 IP\uff0c8030 \u4e3a fe.conf \u4e2d\u7684 http_port\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u4f7f\u7528\u4efb\u4e00 BE \u7684 IP\uff0c\u4ee5\u53ca be.conf \u4e2d\u7684 webserver_port \u8fdb\u884c\u5bfc\u5165\u3002\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"BE_HOST:8040")))),(0,l.kt)("p",null,"\u672c\u5730\u6587\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"p"},"table1_data")," \u4ee5 ",(0,l.kt)("inlineCode",{parentName:"p"},",")," \u4f5c\u4e3a\u6570\u636e\u4e4b\u95f4\u7684\u5206\u9694\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"1,1,jim,2\n2,1,grace,2\n3,2,tom,2\n4,3,bush,3\n5,3,helen,3\n")),(0,l.kt)("p",null,'\u793a\u4f8b2: \u4ee5 "table2_20170707" \u4e3a Label\uff0c\u4f7f\u7528\u672c\u5730\u6587\u4ef6 table2_data \u5bfc\u5165 table2 \u8868\u3002'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location-trusted -u test:test -H "label:table2_20170707" -H "column_separator:|" -T table2_data http://127.0.0.1:8030/api/example_db/table2/_stream_load\n')),(0,l.kt)("p",null,"\u672c\u5730\u6587\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"p"},"table2_data")," \u4ee5 ",(0,l.kt)("inlineCode",{parentName:"p"},"|")," \u4f5c\u4e3a\u6570\u636e\u4e4b\u95f4\u7684\u5206\u9694\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"2017-07-03|1|1|jim|2\n2017-07-05|2|1|grace|2\n2017-07-12|3|2|tom|2\n2017-07-15|4|3|bush|3\n2017-07-12|5|3|helen|3\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u91c7\u7528\u6d41\u5f0f\u5bfc\u5165\u5efa\u8bae\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 10GB \u4ee5\u5185\uff0c\u8fc7\u5927\u7684\u6587\u4ef6\u4f1a\u5bfc\u81f4\u5931\u8d25\u91cd\u8bd5\u4ee3\u4ef7\u53d8\u5927\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6bcf\u4e00\u6279\u5bfc\u5165\u6570\u636e\u90fd\u9700\u8981\u53d6\u4e00\u4e2a Label\uff0cLabel \u6700\u597d\u662f\u4e00\u4e2a\u548c\u4e00\u6279\u6570\u636e\u6709\u5173\u7684\u5b57\u7b26\u4e32\uff0c\u65b9\u4fbf\u9605\u8bfb\u548c\u7ba1\u7406\u3002Doris \u57fa\u4e8e Label \u4fdd\u8bc1\u5728\u4e00\u4e2aDatabase \u5185\uff0c\u540c\u4e00\u6279\u6570\u636e\u53ea\u53ef\u5bfc\u5165\u6210\u529f\u4e00\u6b21\u3002\u5931\u8d25\u4efb\u52a1\u7684 Label \u53ef\u4ee5\u91cd\u7528\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6d41\u5f0f\u5bfc\u5165\u662f\u540c\u6b65\u547d\u4ee4\u3002\u547d\u4ee4\u8fd4\u56de\u6210\u529f\u5219\u8868\u793a\u6570\u636e\u5df2\u7ecf\u5bfc\u5165\uff0c\u8fd4\u56de\u5931\u8d25\u8868\u793a\u8fd9\u6279\u6570\u636e\u6ca1\u6709\u5bfc\u5165\u3002"))),(0,l.kt)("h4",{id:"broker-\u5bfc\u5165"},"Broker \u5bfc\u5165"),(0,l.kt)("p",null,"Broker \u5bfc\u5165\u901a\u8fc7\u90e8\u7f72\u7684 Broker \u8fdb\u7a0b\uff0c\u8bfb\u53d6\u5916\u90e8\u5b58\u50a8\u4e0a\u7684\u6570\u636e\u8fdb\u884c\u5bfc\u5165\u3002\u66f4\u591a\u5e2e\u52a9\u8bf7\u53c2\u9605 ",(0,l.kt)("inlineCode",{parentName:"p"},"HELP BROKER LOAD;")),(0,l.kt)("p",null,'\u793a\u4f8b\uff1a\u4ee5 "table1_20170708" \u4e3a Label\uff0c\u5c06 HDFS \u4e0a\u7684\u6587\u4ef6\u5bfc\u5165 table1 \u8868'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL table1_20170708\n(\n    DATA INFILE("hdfs://your.namenode.host:port/dir/table1_data")\n    INTO TABLE table1\n)\nWITH BROKER hdfs \n(\n    "username"="hdfs_user",\n    "password"="hdfs_password"\n)\nPROPERTIES\n(\n    "timeout"="3600",\n    "max_filter_ratio"="0.1"\n);\n')),(0,l.kt)("p",null,"Broker \u5bfc\u5165\u662f\u5f02\u6b65\u547d\u4ee4\u3002\u4ee5\u4e0a\u547d\u4ee4\u6267\u884c\u6210\u529f\u53ea\u8868\u793a\u63d0\u4ea4\u4efb\u52a1\u6210\u529f\u3002\u5bfc\u5165\u662f\u5426\u6210\u529f\u9700\u8981\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"SHOW LOAD;")," \u67e5\u770b\u3002\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},'SHOW LOAD WHERE LABEL = "table1_20170708";\n')),(0,l.kt)("p",null,"\u8fd4\u56de\u7ed3\u679c\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"State")," \u5b57\u6bb5\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"FINISHED")," \u5219\u8868\u793a\u5bfc\u5165\u6210\u529f\u3002"),(0,l.kt)("p",null,"\u5173\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"SHOW LOAD")," \u7684\u66f4\u591a\u8bf4\u660e\uff0c\u53ef\u4ee5\u53c2\u9605 ",(0,l.kt)("inlineCode",{parentName:"p"},"HELP SHOW LOAD;")),(0,l.kt)("p",null,"\u5f02\u6b65\u7684\u5bfc\u5165\u4efb\u52a1\u5728\u7ed3\u675f\u524d\u53ef\u4ee5\u53d6\u6d88\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},'CANCEL LOAD WHERE LABEL = "table1_20170708";\n')),(0,l.kt)("h2",{id:"\u6570\u636e\u7684\u67e5\u8be2"},"\u6570\u636e\u7684\u67e5\u8be2"),(0,l.kt)("h3",{id:"\u7b80\u5355\u67e5\u8be2"},"\u7b80\u5355\u67e5\u8be2"),(0,l.kt)("p",null,"\u67e5\u8be2\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT * FROM table1 LIMIT 3;\n+--------+----------+----------+------+\n| siteid | citycode | username | pv   |\n+--------+----------+----------+------+\n|      2 |        1 | 'grace'  |    2 |\n|      5 |        3 | 'helen'  |    3 |\n|      3 |        2 | 'tom'    |    2 |\n+--------+----------+----------+------+\n3 rows in set (0.01 sec)\n\nmysql> SELECT * FROM table1 ORDER BY citycode;\n+--------+----------+----------+------+\n| siteid | citycode | username | pv   |\n+--------+----------+----------+------+\n|      2 |        1 | 'grace'  |    2 |\n|      1 |        1 | 'jim'    |    2 |\n|      3 |        2 | 'tom'    |    2 |\n|      4 |        3 | 'bush'   |    3 |\n|      5 |        3 | 'helen'  |    3 |\n+--------+----------+----------+------+\n5 rows in set (0.01 sec)\n")),(0,l.kt)("h3",{id:"join-\u67e5\u8be2"},"Join \u67e5\u8be2"),(0,l.kt)("p",null,"\u67e5\u8be2\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT SUM(table1.pv) FROM table1 JOIN table2 WHERE table1.siteid = table2.siteid;\n+--------------------+\n| sum(`table1`.`pv`) |\n+--------------------+\n|                 12 |\n+--------------------+\n1 row in set (0.20 sec)\n")),(0,l.kt)("h3",{id:"\u5b50\u67e5\u8be2"},"\u5b50\u67e5\u8be2"),(0,l.kt)("p",null,"\u67e5\u8be2\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT SUM(pv) FROM table2 WHERE siteid IN (SELECT siteid FROM table1 WHERE siteid > 2);\n+-----------+\n| sum(`pv`) |\n+-----------+\n|         8 |\n+-----------+\n1 row in set (0.13 sec)\n")))}m.isMDXComponent=!0}}]);