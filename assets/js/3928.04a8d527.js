(window.webpackJsonp=window.webpackJsonp||[]).push([[3928],{4558:function(s,a,t){"use strict";t.r(a);var n=t(15),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("Binlog Load提供了一种使Doris增量同步用户在Mysql数据库的对数据更新操作的CDC(Change Data Capture)功能，使用户更方便的完成Mysql数据的导入")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：")]),s._v(" "),t("p",[s._v("该功能需要在0.15及以后的版本里使用")])]),s._v(" "),t("h2",{attrs:{id:"_1-安装配置-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装配置-mysql"}},[s._v("#")]),s._v(" 1. 安装配置 Mysql")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("安装Mysql")]),s._v(" "),t("p",[s._v("快速使用Docker安装配置Mysql，具体参照下面的连接")]),s._v(" "),t("p",[s._v("https://segmentfault.com/a/1190000021523570")]),s._v(" "),t("p",[s._v("如果是在物理机上安装可以参考下面的连接：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1721575",target:"_blank",rel:"noopener noreferrer"}},[s._v("在 CentOS 7 中安装 MySQL 8 的教程详解"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("开启Mysql binlog")]),s._v(" "),t("p",[s._v("进入 Docker 容器或者物理机上修改/etc/my.cnf 文件，在 [mysqld] 下面添加以下内容，")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("log_bin=mysql_bin\nbinlog-format=Row\nserver-id=1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("然后重启Mysql")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl restart mysqld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("创建 Mysql 表")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("test_cdc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("sex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_2-安装配置canal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装配置canal"}},[s._v("#")]),s._v(" 2. 安装配置Canal")]),s._v(" "),t("p",[s._v("下载canal-1.1.5: https://github.com/alibaba/canal/releases/download/canal-1.1.5/canal.deployer-1.1.5.tar.gz")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("解压Canal到指定目录：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf canal.deployer-1.1.5.tar.gz -C ./canal\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在conf文件夹下新建目录并重命名，作为instance的根目录，目录名你可以自己命名便于识别即可")]),s._v(" "),t("p",[s._v("例如我这里的命名是和我的数据库库名一致：demo")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" conf/demo/instance.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("下面给出的是一个我的示例配置:")]),s._v(" "),t("p",[s._v("这里面的参数说明请参考Canal官方文档："),t("a",{attrs:{href:"https://github.com/alibaba/canal/wiki/QuickStart",target:"_blank",rel:"noopener noreferrer"}},[s._v("QuickStart "),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#################################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## mysql serverId , v1.0.26+ will autoGen")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.mysql.slaveId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("12115")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# enable gtid use true/false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.gtidon")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("false")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# position info")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.master.address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10.220.146.11:3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.master.journal.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.master.position")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.master.timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.master.gtid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rds oss binlog")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.rds.accesskey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.rds.secretkey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.rds.instanceId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# table meta tsdb info")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.tsdb.enable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.tsdb.dbUsername=canal")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.tsdb.dbPassword=canal")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.standby.address =")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.standby.journal.name =")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.standby.position =")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.standby.timestamp =")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.standby.gtid=")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# username/password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.dbUsername")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("zhangfeng")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.dbPassword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("zhangfeng800729)(*Q")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.connectionCharset")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("UTF-8")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# enable druid Decrypt database password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.enableDruid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("false")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# table regex")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.filter.regex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("demo\\\\..*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# table black regex")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("canal.instance.filter.black.regex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# table field filter(format: schema1.tableName1:field1/field2,schema2.tableName2:field1/field2)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.filter.field=test1.t_product:id/subject/keywords,test2.t_company:id/name/contact/ch")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# table field black filter(format: schema1.tableName1:field1/field2,schema2.tableName2:field1/field2)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.instance.filter.black.field=test1.t_product:subject/product_image,test2.t_company:id/name/contact/ch")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mq config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.mq.topic=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dynamic topic route by schema or table regex")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.mq.dynamicTopic=mytest1.user,mytest2\\\\..*,.*\\\\..*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.mq.partition=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hash partition config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.mq.partitionsNum=3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#canal.mq.partitionHash=test.table:id^name,.*\\\\..*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#################################################")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("启动Canal")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("注意：canal instance user/passwd")]),s._v(" "),t("p",[s._v("1.1.5 版本，在canal.properties里加上这两个配置")]),s._v(" "),t("p",[s._v("canal.user = canal\ncanal.passwd = E3619321C1A937C46A0D8BD1DAC39F93B27D4458")]),s._v(" "),t("p",[s._v('默认密码为canal/canal，canal.passwd的密码值可以通过select password("xxx") 来获取')])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[s._v("验证是否启动成功")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -200f logs/demo/demo.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:s.$withBase("/images/blogs/doris-binlog-load/image-20211110145044815.png"),alt:""}})])]),s._v(" "),t("h2",{attrs:{id:"_3-开始同步数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-开始同步数据"}},[s._v("#")]),s._v(" 3.开始同步数据")]),s._v(" "),t("h3",{attrs:{id:"_3-1-创建doris目标表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建doris目标表"}},[s._v("#")]),s._v(" 3.1 创建Doris目标表")]),s._v(" "),t("p",[s._v("用户需要先在Doris端创建好与Mysql端对应的目标表")]),s._v(" "),t("p",[s._v("Binlog Load只能支持Unique类型的目标表，且必须激活目标表的Batch Delete功能。")]),s._v(" "),t("p",[s._v("开启Batch Delete的方法可以参考"),t("code",[s._v("help alter table")]),s._v("中的批量删除功能。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("doris_mysql_binlog_demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("sex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OLAP\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OLAP"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTRIBUTED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HASH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("sex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" BUCKETS "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nPROPERTIES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"replication_allocation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tag.location.default: 3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"in_memory"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storage_format"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"V2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- enable batch delete")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" test_2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("doris_mysql_binlog_demo "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v(" FEATURE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BATCH_DELETE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"_3-1-创建同步作业"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建同步作业"}},[s._v("#")]),s._v(" 3.1 创建同步作业")]),s._v(" "),t("h4",{attrs:{id:"_3-1-1-create-sync-job-语法说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-create-sync-job-语法说明"}},[s._v("#")]),s._v(" 3.1.1 Create Sync Job 语法说明")]),s._v(" "),t("p",[s._v("Name: 'CREATE SYNC JOB'\nDescription:")]),s._v(" "),t("p",[s._v("数据同步(Sync Job)功能，支持用户提交一个常驻的数据同步作业，通过从指定的远端地址读取Binlog日志，增量同步用户在Mysql数据库的对数据更新操作的CDC(Change Data Capture)功能。")]),s._v(" "),t("p",[s._v("目前数据同步作业只支持对接Canal，从Canal Server上获取解析好的Binlog数据，导入到Doris内。")]),s._v(" "),t("p",[s._v("用户可通过 "),t("code",[s._v("SHOW SYNC JOB")]),s._v(" 查看数据同步作业状态。")]),s._v(" "),t("p",[s._v("语法：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("CREATE SYNC [db.]job_name\n (\n \tchannel_desc, \n \tchannel_desc\n \t...\n )\nbinlog_desc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ol",[t("li",[t("p",[t("code",[s._v("job_name")])]),s._v(" "),t("p",[s._v("同步作业名称，是作业在当前数据库内的唯一标识，相同"),t("code",[s._v("job_name")]),s._v("的作业只能有一个在运行。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("channel_desc")])]),s._v(" "),t("p",[s._v("作业下的数据通道，用来描述mysql源表到doris目标表的映射关系。")]),s._v(" "),t("p",[s._v("语法：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("FROM mysql_db.src_tbl INTO des_tbl\n[partitions]\n[columns_mapping]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",[t("li",[t("p",[t("code",[s._v("mysql_db.src_tbl")])]),s._v(" "),t("p",[s._v("指定mysql端的数据库和源表。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("des_tbl")])]),s._v(" "),t("p",[s._v("指定doris端的目标表，只支持Unique表，且需开启表的batch delete功能(开启方法请看help alter table的'批量删除功能')。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("partitions")])]),s._v(" "),t("p",[s._v("指定导入目的表的哪些 partition 中。如果不指定，则会自动导入到对应的 partition 中。")]),s._v(" "),t("p",[s._v("示例：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("PARTITION(p1, p2, p3)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("column_mapping")])]),s._v(" "),t("p",[s._v("指定mysql源表和doris目标表的列之间的映射关系。如果不指定，FE会默认源表和目标表的列按顺序一一对应。")]),s._v(" "),t("p",[s._v("不支持 col_name = expr 的形式表示列。")]),s._v(" "),t("p",[s._v("示例：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("假设目标表列为(k1, k2, v1)，\n \n改变列k1和k2的顺序\nCOLUMNS(k2, k1, v1)\n \n忽略源数据的第四列\nCOLUMNS(k2, k1, v1, dummy_column)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("binlog_desc")])]),s._v(" "),t("p",[s._v("用来描述远端数据源，目前仅支持canal一种。")]),s._v(" "),t("p",[s._v("语法：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('FROM BINLOG\n(\n    "key1" = "value1", \n    "key2" = "value2"\n)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",[t("li",[t("p",[s._v("Canal 数据源对应的属性，以"),t("code",[s._v("canal.")]),s._v("为前缀")]),s._v(" "),t("ol",[t("li",[s._v("canal.server.ip: canal server的地址")]),s._v(" "),t("li",[s._v("canal.server.port: canal server的端口")]),s._v(" "),t("li",[s._v("canal.destination: instance的标识")]),s._v(" "),t("li",[s._v("canal.batchSize: 获取的batch大小的最大值，默认8192")]),s._v(" "),t("li",[s._v("canal.username: instance的用户名")]),s._v(" "),t("li",[s._v("canal.password: instance的密码")]),s._v(" "),t("li",[s._v("canal.debug: 可选，设置为true时，会将batch和每一行数据的详细信息都打印出来\nExamples:")])])])])]),s._v(" "),t("li",[t("p",[s._v("简单为 "),t("code",[s._v("test_db")]),s._v(" 的 "),t("code",[s._v("test_tbl")]),s._v(" 创建一个名为 "),t("code",[s._v("job1")]),s._v(" 的数据同步作业，连接本地的Canal服务器，对应Mysql源表 "),t("code",[s._v("mysql_db1.tbl1")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v(' CREATE SYNC `test_db`.`job1`\n (\n \tFROM `mysql_db1`.`tbl1` INTO `test_tbl `\n )\n FROM BINLOG \n (\n \t"type" = "canal",\n \t"canal.server.ip" = "127.0.0.1",\n \t"canal.server.port" = "11111",\n \t"canal.destination" = "example",\n \t"canal.username" = "",\n \t"canal.password" = ""\n );\n')])])])]),s._v(" "),t("li",[t("p",[s._v("为 "),t("code",[s._v("test_db")]),s._v(" 的多张表创建一个名为 "),t("code",[s._v("job1")]),s._v(" 的数据同步作业，一一对应多张Mysql源表，并显式的指定列映射。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v(' CREATE SYNC `test_db`.`job1` \n (\n \tFROM `mysql_db`.`t1` INTO `test1` COLUMNS(k1, k2, v1) PARTITIONS (p1, p2),\n \tFROM `mysql_db`.`t2` INTO `test2` COLUMNS(k3, k4, v2) PARTITION p1\n ) \n FROM BINLOG \n (\n \t"type" = "canal", \n \t"canal.server.ip" = "xx.xxx.xxx.xx", \n \t"canal.server.port" = "12111", \n \t"canal.destination" = "example",  \n \t"canal.username" = "username", \n \t"canal.password" = "password"\n );\n')])])])])]),s._v(" "),t("h4",{attrs:{id:"_3-1-2-开始同步mysql表里数据到doris"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-开始同步mysql表里数据到doris"}},[s._v("#")]),s._v(" 3.1.2 开始同步mysql表里数据到Doris")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：")]),s._v(" "),t("p",[s._v("创建同步任务之前，首先要在fe.conf里配置enable_create_sync_job=true，这个默认是false不启用，否则就不能创建同步任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('CREATE SYNC test_2.doris_mysql_binlog_demo_job \n(\n\tFROM demo.test_cdc INTO doris_mysql_binlog_demo\n) \nFROM BINLOG \n(\n\t"type" = "canal", \n\t"canal.server.ip" = "10.220.146.10", \n\t"canal.server.port" = "11111", \n\t"canal.destination" = "demo",  \n\t"canal.username" = "canal", \n\t"canal.password" = "canal"\n);\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"_3-1-3-查看同步任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-查看同步任务"}},[s._v("#")]),s._v(" 3.1.3 查看同步任务")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SYNC JOB "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" test_2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:s.$withBase("/images/blogs/doris-binlog-load/image-20211110160106602.png"),alt:""}}),s._v(" "),t("h4",{attrs:{id:"_3-1-4-查看表里的数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-查看表里的数据"}},[s._v("#")]),s._v(" 3.1.4 查看表里的数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" doris_mysql_binlog_demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("img",{attrs:{src:s.$withBase("/images/blogs/doris-binlog-load/image-20211110160331479.png"),alt:""}}),s._v(" "),t("h4",{attrs:{id:"_3-1-5-删除数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5-删除数据"}},[s._v("#")]),s._v(" 3.1.5 删除数据")]),s._v(" "),t("p",[s._v("我们在Mysql 数据表里删除数据，然后看Doris表里的变化")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("delete from test_cdc where id in (12,13)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("我们在去看Doris表里，id是12,13这两条数据已经被删除")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/images/blogs/doris-binlog-load/image-20211110160710709.png"),alt:""}}),s._v(" "),t("h4",{attrs:{id:"_3-1-6-多表同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-6-多表同步"}},[s._v("#")]),s._v(" 3.1.6 多表同步")]),s._v(" "),t("p",[s._v("多表同步只需要像下面这样写法就可以了")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" SYNC test_2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("doris_mysql_binlog_demo_job \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test_cdc "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" doris_mysql_binlog_demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test_cdc_1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" doris_mysql_binlog_demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test_cdc_2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" doris_mysql_binlog_demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test_cdc_3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" doris_mysql_binlog_demo\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);