"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[69084],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>c});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),s=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=s(t.components);return n.createElement(p.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),u=s(a),c=r,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||l;return a?n.createElement(k,i(i({ref:e},d),{},{components:a})):n.createElement(k,i({ref:e},d))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=u;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},93536:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const l={title:"TPC-H Benchmark",language:"en"},i=void 0,o={unversionedId:"benchmark/tpch",id:"benchmark/tpch",title:"TPC-H Benchmark",description:"\x3c!--",source:"@site/docs/benchmark/tpch.md",sourceDirName:"benchmark",slug:"/benchmark/tpch",permalink:"/docs/benchmark/tpch",draft:!1,tags:[],version:"current",frontMatter:{title:"TPC-H Benchmark",language:"en"},sidebar:"docs",previous:{title:"Star-Schema-Benchmark",permalink:"/docs/benchmark/ssb"},next:{title:"Release 1.1.0",permalink:"/docs/releasenotes/release-1.1.0"}},p={},s=[{value:"1. Hardware Environment",id:"1-hardware-environment",level:2},{value:"2. Software Environment",id:"2-software-environment",level:2},{value:"3. Test Data Volume",id:"3-test-data-volume",level:2},{value:"4. Test SQL",id:"4-test-sql",level:2},{value:"5. Test Result",id:"5-test-result",level:2},{value:"6. Environmental Preparation",id:"6-environmental-preparation",level:2},{value:"7. Data Preparation",id:"7-data-preparation",level:2},{value:"7.1 Download and install the TPC-H data generation tool",id:"71-download-and-install-the-tpc-h-data-generation-tool",level:3},{value:"7.2 Generate TPC-H test set",id:"72-generate-tpc-h-test-set",level:3},{value:"7.3 Create Table",id:"73-create-table",level:3},{value:"7.3.1 Prepare the <code>doris-cluster.conf</code> file",id:"731-prepare-the-doris-clusterconf-file",level:4},{value:"7.3.2 Execute the following script to generate and create the TPC-H table",id:"732-execute-the-following-script-to-generate-and-create-the-tpc-h-table",level:4},{value:"7.4 \u5bfc\u5165\u6570\u636e",id:"74-\u5bfc\u5165\u6570\u636e",level:3},{value:"7.5 Check Imported Data",id:"75-check-imported-data",level:3},{value:"7.6 Query Test",id:"76-query-test",level:3}],d={toc:s};function m(t){let{components:e,...l}=t;return(0,r.kt)("wrapper",(0,n.Z)({},d,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tpc-h-benchmark"},"TPC-H benchmark"),(0,r.kt)("p",null,"TPC-H is a Decision Support Benchmark consisting of a set of business-oriented ad hoc queries and concurrent data modifications. The data that queries and populates the database has broad industry relevance. This benchmark demonstrates a decision support system that examines large amounts of data, executes highly complex queries, and answers critical business questions. The performance metric reported by TPC-H is called the TPC-H Hourly Compound Query Performance Metric (QphH@Size) and reflects multiple aspects of the system's ability to process queries. These aspects include the database size chosen when executing the query, the query processing power when the query is submitted by a single stream, and the query throughput when the query is submitted by multiple concurrent users."),(0,r.kt)("p",null,"This document mainly introduces the performance of Doris on the TPC-H test set."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note 1: Standard test sets including TPC-H are usually far from actual business scenarios, and some tests will perform parameter tuning for the test set. Therefore, the test results of the standard test set can only reflect the performance of the database in specific scenarios. Users are advised to conduct further testing with actual business data."),(0,r.kt)("p",{parentName:"blockquote"},"Note 2: The operations covered in this document are tested on CentOS 7.x.")),(0,r.kt)("p",null,"On the 22 queries on the TPC-H standard test dataset, we conducted a comparison test based on Doris version 1.1 and Doris 0.15.0 RC04 version, and the overall performance was improved by 3-4 times. In individual scenarios, a ten-fold improvement has been achieved."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220614114351241",src:a(93713).Z,width:"1296",height:"604"})),(0,r.kt)("h2",{id:"1-hardware-environment"},"1. Hardware Environment"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Hardware"),(0,r.kt)("th",{parentName:"tr",align:null},"Configuration Instructions"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"number of machines"),(0,r.kt)("td",{parentName:"tr",align:null},"4 Alibaba Cloud hosts (1 FE, 3 BE)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CPU"),(0,r.kt)("td",{parentName:"tr",align:null},"Intel Xeon(Cascade Lake) Platinum 8269CY  16C  (2.5 GHz/3.2 GHz)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Memory"),(0,r.kt)("td",{parentName:"tr",align:null},"64G")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Network"),(0,r.kt)("td",{parentName:"tr",align:null},"5Gbps")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Disk"),(0,r.kt)("td",{parentName:"tr",align:null},"ESSD cloud hard disk")))),(0,r.kt)("h2",{id:"2-software-environment"},"2. Software Environment"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Doris deploys 3BE 1FE;"),(0,r.kt)("li",{parentName:"ul"},"Kernel version: Linux version 5.4.0-96-generic (buildd@lgw01-amd64-051)"),(0,r.kt)("li",{parentName:"ul"},"OS version: CentOS 7.8"),(0,r.kt)("li",{parentName:"ul"},"Doris software version: Apache Doris 1.1, Apache Doris 0.15.0 RC04"),(0,r.kt)("li",{parentName:"ul"},'JDK: openjdk version "11.0.14" 2022-01-18')),(0,r.kt)("h2",{id:"3-test-data-volume"},"3. Test Data Volume"),(0,r.kt)("p",null,"The entire test simulation generates 100G of data and is imported into Doris 0.15.0 RC04 and Doris 1.1 versions for testing. The following is the relevant description of the table and the amount of data."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"TPC-H Table Name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Rows"),(0,r.kt)("th",{parentName:"tr",align:null},"data size"),(0,r.kt)("th",{parentName:"tr",align:"left"},"remark"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"REGION"),(0,r.kt)("td",{parentName:"tr",align:"left"},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"400KB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"NATION"),(0,r.kt)("td",{parentName:"tr",align:"left"},"25"),(0,r.kt)("td",{parentName:"tr",align:null},"7.714 KB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"SUPPLIER"),(0,r.kt)("td",{parentName:"tr",align:"left"},"100 million"),(0,r.kt)("td",{parentName:"tr",align:null},"85.528 MB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"PART"),(0,r.kt)("td",{parentName:"tr",align:"left"},"20 million"),(0,r.kt)("td",{parentName:"tr",align:null},"752.330 MB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"PARTSUPP"),(0,r.kt)("td",{parentName:"tr",align:"left"},"80 million"),(0,r.kt)("td",{parentName:"tr",align:null},"4.375 GB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"CUSTOMER"),(0,r.kt)("td",{parentName:"tr",align:"left"},"15 million"),(0,r.kt)("td",{parentName:"tr",align:null},"1.317 GB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"ORDERS"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.5 billion"),(0,r.kt)("td",{parentName:"tr",align:null},"6.301 GB"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"LINEITEM"),(0,r.kt)("td",{parentName:"tr",align:"left"},"6 billion"),(0,r.kt)("td",{parentName:"tr",align:null},"20.882 GB"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("h2",{id:"4-test-sql"},"4. Test SQL"),(0,r.kt)("p",null,"TPCH 22 test query statements \uff1a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/incubator-doris/tree/master/tools/tpch-tools/queries"},"TPCH-Query-SQL")),(0,r.kt)("p",null,"Notice:"),(0,r.kt)("p",null,"The following four parameters in the above SQL do not exist in 0.15.0 RC04. When executed in 0.15.0 RC04, remove them:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1. enable_vectorized_engine=true,\n2. batch_size=4096,\n3. disable_join_reorder=false\n4. enable_projection=true\n")),(0,r.kt)("h2",{id:"5-test-result"},"5. Test Result"),(0,r.kt)("p",null,"Here we use the upcoming Doris-1.1 version and Doris-0.15.0 RC04 version for comparative testing. The test results are as follows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Query"),(0,r.kt)("th",{parentName:"tr",align:null},"Doris-1.1(s)"),(0,r.kt)("th",{parentName:"tr",align:null},"0.15.0 RC04(s)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q1"),(0,r.kt)("td",{parentName:"tr",align:null},"3.75"),(0,r.kt)("td",{parentName:"tr",align:null},"28.63")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q2"),(0,r.kt)("td",{parentName:"tr",align:null},"4.22"),(0,r.kt)("td",{parentName:"tr",align:null},"7.88")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q3"),(0,r.kt)("td",{parentName:"tr",align:null},"2.64"),(0,r.kt)("td",{parentName:"tr",align:null},"9.39")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q4"),(0,r.kt)("td",{parentName:"tr",align:null},"1.5"),(0,r.kt)("td",{parentName:"tr",align:null},"9.3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q5"),(0,r.kt)("td",{parentName:"tr",align:null},"2.15"),(0,r.kt)("td",{parentName:"tr",align:null},"4.11")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q6"),(0,r.kt)("td",{parentName:"tr",align:null},"0.19"),(0,r.kt)("td",{parentName:"tr",align:null},"0.43")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q7"),(0,r.kt)("td",{parentName:"tr",align:null},"1.04"),(0,r.kt)("td",{parentName:"tr",align:null},"1.61")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q8"),(0,r.kt)("td",{parentName:"tr",align:null},"1.75"),(0,r.kt)("td",{parentName:"tr",align:null},"50.35")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q9"),(0,r.kt)("td",{parentName:"tr",align:null},"7.94"),(0,r.kt)("td",{parentName:"tr",align:null},"16.34")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q10"),(0,r.kt)("td",{parentName:"tr",align:null},"1.41"),(0,r.kt)("td",{parentName:"tr",align:null},"5.21")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q11"),(0,r.kt)("td",{parentName:"tr",align:null},"0.35"),(0,r.kt)("td",{parentName:"tr",align:null},"1.72")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q12"),(0,r.kt)("td",{parentName:"tr",align:null},"0.57"),(0,r.kt)("td",{parentName:"tr",align:null},"5.39")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q13"),(0,r.kt)("td",{parentName:"tr",align:null},"8.15"),(0,r.kt)("td",{parentName:"tr",align:null},"20.88")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q14"),(0,r.kt)("td",{parentName:"tr",align:null},"0.3"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q15"),(0,r.kt)("td",{parentName:"tr",align:null},"0.66"),(0,r.kt)("td",{parentName:"tr",align:null},"1.86")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q16"),(0,r.kt)("td",{parentName:"tr",align:null},"0.79"),(0,r.kt)("td",{parentName:"tr",align:null},"1.32")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q17"),(0,r.kt)("td",{parentName:"tr",align:null},"1.51"),(0,r.kt)("td",{parentName:"tr",align:null},"26.67")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q18"),(0,r.kt)("td",{parentName:"tr",align:null},"3.364"),(0,r.kt)("td",{parentName:"tr",align:null},"11.77")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q19"),(0,r.kt)("td",{parentName:"tr",align:null},"0.829"),(0,r.kt)("td",{parentName:"tr",align:null},"1.71")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q20"),(0,r.kt)("td",{parentName:"tr",align:null},"2.77"),(0,r.kt)("td",{parentName:"tr",align:null},"5.2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q21"),(0,r.kt)("td",{parentName:"tr",align:null},"4.47"),(0,r.kt)("td",{parentName:"tr",align:null},"10.34")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Q22"),(0,r.kt)("td",{parentName:"tr",align:null},"0.9"),(0,r.kt)("td",{parentName:"tr",align:null},"3.22")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"total")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"51.253")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"223.33"))))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Result description"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The data set corresponding to the test results is scale 100, about 600 million."),(0,r.kt)("li",{parentName:"ul"},"The test environment is configured to be commonly used by users, including 4 cloud servers, 16-core 64G SSD, and 1 FE and 3 BE deployment."),(0,r.kt)("li",{parentName:"ul"},"Use common user configuration tests to reduce user selection and evaluation costs, but will not consume so many hardware resources during the entire test process."),(0,r.kt)("li",{parentName:"ul"},"The test results are averaged over 3 executions. And the data has been fully compacted (if the data is tested immediately after the data is imported, the query delay may be higher than the test result, and the speed of compaction is being continuously optimized, and will be significantly reduced in the future)."),(0,r.kt)("li",{parentName:"ul"},"0.15 RC04 Q14 execution failed in TPC-H test, unable to complete query.")))),(0,r.kt)("h2",{id:"6-environmental-preparation"},"6. Environmental Preparation"),(0,r.kt)("p",null,"Please refer to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/install/install-deploy"},"official document")," to install and deploy Doris to obtain a normal running Doris cluster (at least 1 FE 1 BE, 1 FE 3 BE is recommended)."),(0,r.kt)("h2",{id:"7-data-preparation"},"7. Data Preparation"),(0,r.kt)("h3",{id:"71-download-and-install-the-tpc-h-data-generation-tool"},"7.1 Download and install the TPC-H data generation tool"),(0,r.kt)("p",null,"Execute the following script to download and compile the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/incubator-doris/tree/master/tools/tpch-tools"},"tpch-tools")," tool."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sh build-tpch-dbgen.sh\n")),(0,r.kt)("p",null,"After successful installation, the ",(0,r.kt)("inlineCode",{parentName:"p"},"dbgen")," binary will be generated in the ",(0,r.kt)("inlineCode",{parentName:"p"},"TPC-H_Tools_v3.0.0/")," directory."),(0,r.kt)("h3",{id:"72-generate-tpc-h-test-set"},"7.2 Generate TPC-H test set"),(0,r.kt)("p",null,"Execute the following script to generate the TPC-H dataset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sh gen-tpch-data.sh\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note 1: View script help via ",(0,r.kt)("inlineCode",{parentName:"p"},"sh gen-tpch-data.sh -h"),"."),(0,r.kt)("p",{parentName:"blockquote"},"Note 2: The data will be generated in the ",(0,r.kt)("inlineCode",{parentName:"p"},"tpch-data/")," directory with the suffix ",(0,r.kt)("inlineCode",{parentName:"p"},".tbl"),". The total file size is about 100GB. The generation time may vary from a few minutes to an hour."),(0,r.kt)("p",{parentName:"blockquote"},"Note 3: The standard test data set of 100G is generated by default")),(0,r.kt)("h3",{id:"73-create-table"},"7.3 Create Table"),(0,r.kt)("h4",{id:"731-prepare-the-doris-clusterconf-file"},"7.3.1 Prepare the ",(0,r.kt)("inlineCode",{parentName:"h4"},"doris-cluster.conf")," file"),(0,r.kt)("p",null,"Before calling the import script, you need to write the FE's ip port and other information in the ",(0,r.kt)("inlineCode",{parentName:"p"},"doris-cluster.conf")," file."),(0,r.kt)("p",null,"File location and ",(0,r.kt)("inlineCode",{parentName:"p"},"load-tpch-data.sh")," level."),(0,r.kt)("p",null,"The contents of the file include FE's ip, HTTP port, user name, password and the DB name of the data to be imported:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Any of FE host\nexport FE_HOST='127.0.0.1'\n# http_port in fe.conf\nexport FE_HTTP_PORT=8030\n# query_port in fe.conf\nexport FE_QUERY_PORT=9030\n# Doris username\nexport USER='root'\n# Doris password\nexport PASSWORD=''\n# The database where TPC-H tables located\nexport DB='tpch1'\n")),(0,r.kt)("h4",{id:"732-execute-the-following-script-to-generate-and-create-the-tpc-h-table"},"7.3.2 Execute the following script to generate and create the TPC-H table"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sh create-tpch-tables.sh\n")),(0,r.kt)("p",null,"Or copy the table creation statement in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/incubator-doris/blob/master/tools/tpch-tools/create-tpch-tables.sql"},"create-tpch-tables.sql"),", Execute in Doris."),(0,r.kt)("h3",{id:"74-\u5bfc\u5165\u6570\u636e"},"7.4 \u5bfc\u5165\u6570\u636e"),(0,r.kt)("p",null,"\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u6267\u884c\u6570\u636e\u5bfc\u5165\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sh ./load-tpch-data.sh\n")),(0,r.kt)("h3",{id:"75-check-imported-data"},"7.5 Check Imported Data"),(0,r.kt)("p",null,"Execute the following SQL statement to check that the imported data is consistent with the above data."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"select count(*)  from  lineitem;\nselect count(*)  from  orders;\nselect count(*)  from  partsupp;\nselect count(*)  from  part;\nselect count(*)  from  customer;\nselect count(*)  from  supplier;\nselect count(*)  from  nation;\nselect count(*)  from  region;\nselect count(*)  from  revenue0;\n")),(0,r.kt)("h3",{id:"76-query-test"},"7.6 Query Test"),(0,r.kt)("p",null,"Execute the above test SQL or execute the following command"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./run-tpch-queries.sh\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Notice:"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At present, the query optimizer and statistics functions of Doris are not perfect, so we rewrite some queries in TPC-H to adapt to the execution framework of Doris, but it does not affect the correctness of the results")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Doris' new query optimizer will be released in subsequent versions")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set ",(0,r.kt)("inlineCode",{parentName:"p"},"set mem_exec_limit=8G")," before executing the query")))))}m.isMDXComponent=!0},93713:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/image-20220614114351241-6dcc825336b9891a3150dcdf8a4327bb.png"}}]);