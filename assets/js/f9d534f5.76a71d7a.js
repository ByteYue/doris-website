"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[2405],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>u});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(r),u=a,N=m["".concat(s,".").concat(u)]||m[u]||c[u]||i;return r?n.createElement(N,o(o({ref:t},d),{},{components:r})):n.createElement(N,o({ref:t},d))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},48699:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=r(87462),a=(r(67294),r(3905));const i={title:"Hive of Doris",language:"en"},o=void 0,l={unversionedId:"extending-doris/hive-of-doris",id:"version-1.0/extending-doris/hive-of-doris",title:"Hive of Doris",description:"\x3c!--",source:"@site/versioned_docs/version-1.0/extending-doris/hive-of-doris.md",sourceDirName:"extending-doris",slug:"/extending-doris/hive-of-doris",permalink:"/docs/1.0/extending-doris/hive-of-doris",draft:!1,tags:[],version:"1.0",frontMatter:{title:"Hive of Doris",language:"en"},sidebar:"docs",previous:{title:"ODBC of Doris",permalink:"/docs/1.0/extending-doris/odbc-of-doris"},next:{title:"Iceberg of Doris",permalink:"/docs/1.0/extending-doris/iceberg-of-doris"}},s={},p=[{value:"Glossary",id:"glossary",level:2},{value:"Noun in Doris",id:"noun-in-doris",level:3},{value:"How To Use",id:"how-to-use",level:2},{value:"Create Hive External Table",id:"create-hive-external-table",level:3},{value:"Parameter Description",id:"parameter-description",level:4},{value:"Data Type Matching",id:"data-type-matching",level:2},{value:"Query Usage",id:"query-usage",level:3}],d={toc:p};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"hive-external-table-of-doris"},"Hive External Table of Doris"),(0,a.kt)("p",null,"Hive External Table of Doris provides Doris with direct access to Hive external tables, which eliminates the need for cumbersome data import and solves the problem of analyzing Hive tables with the help of Doris' OLAP capabilities: "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"support for Hive data sources to access Doris"),(0,a.kt)("li",{parentName:"ol"},"Support joint queries between Doris and Hive data sources to perform more complex analysis operations")),(0,a.kt)("p",null,"This document introduces how to use this feature and the considerations."),(0,a.kt)("h2",{id:"glossary"},"Glossary"),(0,a.kt)("h3",{id:"noun-in-doris"},"Noun in Doris"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"FE: Frontend, the front-end node of Doris, responsible for metadata management and request access."),(0,a.kt)("li",{parentName:"ul"},"BE: Backend, the backend node of Doris, responsible for query execution and data storage")),(0,a.kt)("h2",{id:"how-to-use"},"How To Use"),(0,a.kt)("h3",{id:"create-hive-external-table"},"Create Hive External Table"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- Syntax\nCREATE [EXTERNAL] TABLE table_name (\n  col_name col_type [NULL | NOT NULL] [COMMENT \"comment\"]\n) ENGINE=HIVE\n[COMMENT \"comment\"] )\nPROPERTIES (\n  'property_name'='property_value',\n  ...\n);\n\n-- Example: Create the hive_table table under hive_db in a Hive cluster\nCREATE TABLE `t_hive` (\n  `k1` int NOT NULL COMMENT \"\",\n  `k2` char(10) NOT NULL COMMENT \"\",\n  `k3` datetime NOT NULL COMMENT \"\",\n  `k5` varchar(20) NOT NULL COMMENT \"\",\n  `k6` double NOT NULL COMMENT \"\"\n) ENGINE=HIVE\nCOMMENT \"HIVE\"\nPROPERTIES (\n'hive.metastore.uris' = 'thrift://192.168.0.1:9083',\n'database' = 'hive_db',\n'table' = 'hive_table'\n);\n")),(0,a.kt)("h4",{id:"parameter-description"},"Parameter Description"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"External Table Columns",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Column names should correspond to the Hive table"),(0,a.kt)("li",{parentName:"ul"},"The order of the columns should be the same as the Hive table"),(0,a.kt)("li",{parentName:"ul"},"Must contain all the columns in the Hive table"),(0,a.kt)("li",{parentName:"ul"},"Hive table partition columns do not need to be specified, they can be defined as normal columns."))),(0,a.kt)("li",{parentName:"ul"},"ENGINE should be specified as HIVE"),(0,a.kt)("li",{parentName:"ul"},"PROPERTIES attribute.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"hive.metastore.uris"),": Hive Metastore service address"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"database"),": the name of the database to which Hive is mounted"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"table"),": the name of the table to which Hive is mounted")))),(0,a.kt)("h2",{id:"data-type-matching"},"Data Type Matching"),(0,a.kt)("p",null,"The supported Hive column types correspond to Doris in the following table."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"center"},"Hive"),(0,a.kt)("th",{parentName:"tr",align:"center"},"Doris"),(0,a.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"BOOLEAN"),(0,a.kt)("td",{parentName:"tr",align:"center"},"BOOLEAN"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"CHAR"),(0,a.kt)("td",{parentName:"tr",align:"center"},"CHAR"),(0,a.kt)("td",{parentName:"tr",align:"center"},"Only UTF8 encoding is supported")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"VARCHAR"),(0,a.kt)("td",{parentName:"tr",align:"center"},"VARCHAR"),(0,a.kt)("td",{parentName:"tr",align:"center"},"Only UTF8 encoding is supported")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"TINYINT"),(0,a.kt)("td",{parentName:"tr",align:"center"},"TINYINT"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"SMALLINT"),(0,a.kt)("td",{parentName:"tr",align:"center"},"SMALLINT"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"INT"),(0,a.kt)("td",{parentName:"tr",align:"center"},"INT"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"BIGINT"),(0,a.kt)("td",{parentName:"tr",align:"center"},"BIGINT"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"FLOAT"),(0,a.kt)("td",{parentName:"tr",align:"center"},"FLOAT"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"DOUBLE"),(0,a.kt)("td",{parentName:"tr",align:"center"},"DOUBLE"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"DECIMAL"),(0,a.kt)("td",{parentName:"tr",align:"center"},"DECIMAL"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"DATE"),(0,a.kt)("td",{parentName:"tr",align:"center"},"DATE"),(0,a.kt)("td",{parentName:"tr",align:"center"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"TIMESTAMP"),(0,a.kt)("td",{parentName:"tr",align:"center"},"DATETIME"),(0,a.kt)("td",{parentName:"tr",align:"center"},"Timestamp to Datetime will lose precision")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note:")," "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Hive table Schema changes ",(0,a.kt)("strong",{parentName:"li"},"are not automatically synchronized")," and require rebuilding the Hive external table in Doris."),(0,a.kt)("li",{parentName:"ul"},"The current Hive storage format only supports Text, Parquet and ORC types"),(0,a.kt)("li",{parentName:"ul"},"The Hive version currently supported by default is 2.3.7, which has not been tested in other versions. More versions will be supported in the future.")),(0,a.kt)("h3",{id:"query-usage"},"Query Usage"),(0,a.kt)("p",null,"After you finish building the Hive external table in Doris, it is no different from a normal Doris OLAP table except that you cannot use the data model in Doris (rollup, preaggregation, materialized view, etc.)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from t_hive where k1 > 1000 and k3 = 'term' or k4 like '%doris';\n")))}c.isMDXComponent=!0}}]);