(window.webpackJsonp=window.webpackJsonp||[]).push([[831],{1458:function(s,a,e){"use strict";e.r(a);var t=e(15),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"快速开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[s._v("#")]),s._v(" 快速开始")]),s._v(" "),e("h2",{attrs:{id:"环境准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[s._v("#")]),s._v(" 环境准备")]),s._v(" "),e("ol",[e("li",[s._v("CPU：2C（最低）8C（推荐）")]),s._v(" "),e("li",[s._v("内存：4G（最低）48G（推荐）")]),s._v(" "),e("li",[s._v("硬盘：100G（最低）400G（推荐）")]),s._v(" "),e("li",[s._v("平台：MacOS（Intel）、LinuxOS、Windows虚拟机")]),s._v(" "),e("li",[s._v("系统：CentOS（7.1及以上）、Ubuntu（16.04 及以上）")]),s._v(" "),e("li",[s._v("软件：JDK（1.8及以上）、GCC（4.8.2 及以上）")])]),s._v(" "),e("h2",{attrs:{id:"单机部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单机部署"}},[s._v("#")]),s._v(" 单机部署")]),s._v(" "),e("p",[e("strong",[s._v("在创建之前，请准备好已完成编译的FE/BE文件，此教程不再赘述编译过程。")])]),s._v(" "),e("p",[e("strong",[s._v("该教程为单节点、1FE 和 1BE 的混布教程，只需要一个节点，便于快速体验 Doris。")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("设置系统最大打开文件句柄数")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/security/limits.conf \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加以下两行信息")]),s._v("\n* soft nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n* hard nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出并重启服务器")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("下载二进制包/自主编译 FE / BE 文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dist.apache.org/repos/dist/release/doris/要部署的版本\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如如下链接")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dist.apache.org/repos/dist/release/doris/1.0/1.0.0-incubating/apache-doris-1.0.0-incubating-bin.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("解压缩 tar.gz 文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf 下载好的二进制压缩包\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf apache-doris-1.0.0-incubating-bin.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("迁移解压缩后的程序文件至指定目录并重命名")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" 解压后的根目录 目标路径\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" 目标路径\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" apache-doris-1.0.0-incubating-bin /opt/doris\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/doris\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("配置 FE")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置FE-Config")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" fe/conf/fe.conf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消priority_networks的注释，修改参数")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如当前节点的 IP 地址为 10.10.2.21，则需要更改为 10.10.2.0/24 填入")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里需要填入的是 IP 子网网段地址，并非 IP 地址")]),s._v("\npriority_networks "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".2.0/24\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("配置 BE")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置FE-Config")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" be/conf/be.conf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消priority_networks的注释，修改参数")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如当前节点的 IP 地址为 10.10.2.21，则需要更改为 10.10.2.0/24 填入")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里需要填入的是 IP 子网网段地址，并非 IP 地址")]),s._v("\npriority_networks "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".2.0/24\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("配置环境变量")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置环境变量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile.d/doris.sh\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DORIS_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Doris根目录 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如/opt/doris")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DORIS_HOME")]),s._v("/fe/bin:"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DORIS_HOME")]),s._v("/be/bin\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存并source")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile.d/doris.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("启动 FE 和 BE 并注册 BE 至 FE")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("start_fe.sh --daemon\nstart_be.sh --daemon\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("校验FE启动是否成功")]),s._v(" "),e("blockquote",[e("ol",[e("li",[s._v("检查是否启动成功, JPS 命令下有没有 PaloFe 进程")]),s._v(" "),e("li",[s._v("FE 进程启动后，会⾸先加载元数据，根据 FE ⻆⾊的不同，在⽇志中会看到 transfer from UNKNOWN to MASTER/FOLLOWER/OBSERVER 。最终会看到 thrift server started ⽇志，并且可以通过 mysql 客户端连接到 FE，则 表示 FE 启动成功。")]),s._v(" "),e("li",[s._v('也可以通过如下连接查看是否启动成功： http://fe_host:fe_http_port/api/bootstrap 如果返回： {"status":"OK","msg":"Success"} 则表示启动成功，其余情况，则可能存在问题。')]),s._v(" "),e("li",[s._v("外⽹环境访问 http://fe_host:fe_http_port 查看是否可以访问WebUI界 ⾯，登录账号默认为root，密码为空")])]),s._v(" "),e("p",[e("strong",[s._v("注：如果在 fe.log 中查看不到启动失败的信息，也许在 fe.out 中可以看到。")])])]),s._v(" "),e("p",[s._v("校验 BE 启动是否成功")]),s._v(" "),e("blockquote",[e("ol",[e("li",[s._v("BE 进程启动后，如果之前有数据，则可能有数分钟不等的数据索引加载时 间。")]),s._v(" "),e("li",[s._v("如果是 BE 的第⼀次启动，或者该 BE 尚未加⼊任何集群，则 BE ⽇志会定期滚 动 waiting to receive first heartbeat from frontend 字样。表示 BE 还未通过 FE 的⼼跳收到 Master 的地址，正在被动等待。这种错误⽇志， 在 FE 中 ADD BACKEND 并发送⼼跳后，就会消失。如果在接到⼼跳后，⼜重 复出现 master client, get client from cache failed.host: , port: 0, code: 7 字样，说明 FE 成功连接了 BE，但 BE ⽆法主动连接 FE。可能需要检查 BE 到 FE 的 rpc_port 的连通性。")]),s._v(" "),e("li",[s._v("如果 BE 已经被加⼊集群，⽇志中应该每隔 5 秒滚动来⾃ FE 的⼼跳⽇ 志： get heartbeat, host: xx.xx.xx.xx, port: 9020, cluster id: xxxxxx ，表示⼼跳正常。")]),s._v(" "),e("li",[s._v("其次，⽇志中应该每隔 10 秒滚动 finish report task success. return code: 0 的字样，表示 BE 向 FE 的通信正常。")]),s._v(" "),e("li",[s._v("同时，如果有数据查询，应该能看到不停滚动的⽇志，并且有 execute time is xxx ⽇志，表示 BE 启动成功，并且查询正常。")]),s._v(" "),e("li",[s._v('也可以通过如下连接查看是否启动成功： http://be_host:be_http_port/api/health 如果返回： {"status": "OK","msg": "To Be Added"} 则表示启动成功，其余情况，则可能存在问题。')])]),s._v(" "),e("p",[e("strong",[s._v("注：如果在 be.INFO 中查看不到启动失败的信息，也许在 be.out 中可以看到。")])])]),s._v(" "),e("p",[s._v("注册 BE 至 FE（使用MySQL-Client，需自行安装）")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录，由于是单节点混布，所以 FE_IP 和 BE_IP 为同一个 IP 地址")]),s._v("\nmysql -h FE_IP -P "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9030")]),s._v(" -uroot\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注册BE")]),s._v("\nALTER SYSTEM ADD BACKEND "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BE_IP:9050"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])]),s._v(" "),e("h2",{attrs:{id:"apache-doris简单使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apache-doris简单使用"}},[s._v("#")]),s._v(" Apache Doris简单使用")]),s._v(" "),e("p",[s._v("Doris 采用 MySQL 协议进行通信，用户可通过 MySQL Client 或者 MySQL JDBC 连接到 Doris 集群。选择 MySQL client 版本时建议采用5.1 之后的版本，因为 5.1 之前不能支持长度超过 16 个字符的用户名。Doris SQL 语法基本覆盖 MySQL 语法。")]),s._v(" "),e("h3",{attrs:{id:"apache-doris-web-ui访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apache-doris-web-ui访问"}},[s._v("#")]),s._v(" Apache Doris Web UI访问")]),s._v(" "),e("p",[s._v("默认使用 Http 协议进行 WebUI 访问，在浏览器输入以下格式地址访问")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("http://FE_IP:FE_HTTP_PORT(默认8030)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如在集群安装时修改了账号密码，则使用新的账号密码登陆")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("默认账号：root\n默认密码：空\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",[e("li",[e("p",[s._v("WebUI简介")]),s._v(" "),e("p",[s._v("在 FE-WEB-UI 首页，罗列了 Version 和 Hardware Info")]),s._v(" "),e("p",[s._v("Tab 页有以下六个模块：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("Playground（可视化 SQL）")])]),s._v(" "),e("li",[e("p",[s._v("System（系统状态）")])]),s._v(" "),e("li",[e("p",[s._v("Log（集群日志）")])]),s._v(" "),e("li",[e("p",[s._v("QueryProfile（SQL 执行日志）")])]),s._v(" "),e("li",[e("p",[s._v("Session（链接列表）")])]),s._v(" "),e("li",[e("p",[s._v("Configuration（配置参数）")])])])]),s._v(" "),e("li",[e("p",[s._v("查看BE列表")]),s._v(" "),e("p",[s._v("进入 "),e("code",[s._v("System")]),s._v(" ——> "),e("code",[s._v("backends")]),s._v(" 即可查看")]),s._v(" "),e("p",[s._v("需要关注的是 "),e("code",[s._v("Alive")]),s._v("列，该列的 "),e("code",[s._v("True")]),s._v("和 "),e("code",[s._v("False")]),s._v(" 代表对应的BE节点的正常和异常状态")])]),s._v(" "),e("li",[e("p",[s._v("profile查询")]),s._v(" "),e("p",[s._v("进入 QueryProfile 可以查看到最近的100条 SQL 执行 Report 信息，点击 QueryID 列的指定 ID 可以查看 Profile 信息")])])]),s._v(" "),e("h3",{attrs:{id:"mysql命令行-图形化客户端访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql命令行-图形化客户端访问"}},[s._v("#")]),s._v(" MySQL命令行/图形化客户端访问")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令行")]),s._v("\nmysql -h FE-host -P "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9030")]),s._v(" -u用户名 -p密码\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端（Navicat为例）")]),s._v("\n主机：FE-host（若是云服务器，则需要公网IP）\n端口：9030\n用户名：用户名\n密码：密码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h4",{attrs:{id:"profile设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#profile设置"}},[s._v("#")]),s._v(" Profile设置")]),s._v(" "),e("p",[s._v("FE 将查询计划拆分成为 Fragment 下发到 BE 进行任务执行。BE 在执行 Fragment 时记录了"),e("strong",[s._v("运行状态时的统计值")]),s._v("，并将 Fragment 执行的统计信息输出到日志之中。 FE 也可以通过开关将各个 Fragment 记录的这些统计值进行搜集，并在 FE 的Web页面上打印结果。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("打开 FE 的 Report 开关")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("set enable_profile=true; \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("执行 SQL 语句后，可在 FE 的 WEB-UI 界面查看对应的 SQL 语句执行 Report 信息")])])]),s._v(" "),e("p",[s._v("如需获取完整的参数对照表，请至 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/admin-manual/query-profile.html"}},[s._v("Profile 参数解析")]),s._v(" 查看详情")],1),s._v(" "),e("h4",{attrs:{id:"库表操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#库表操作"}},[s._v("#")]),s._v(" 库表操作")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("查看数据库列表")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show databases;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("创建数据库")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE DATABASE 数据库名;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("关于 Create-DataBase 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-DATABASE.html"}},[s._v("Create-DataBase")]),s._v(" 命令手册。")],1),s._v(" "),e("p",[s._v("如果不清楚命令的全名，可以使用 \"help 命令某一字段\" 进行模糊查询。如键入 'HELP CREATE'，可以匹配到 "),e("code",[s._v("CREATE DATABASE")]),s._v(", "),e("code",[s._v("CREATE TABLE")]),s._v(", "),e("code",[s._v("CREATE USER")]),s._v(" 等命令。")])]),s._v(" "),e("p",[s._v("数据库创建完成之后，可以通过 "),e("code",[s._v("SHOW DATABASES;")]),s._v(" 查看数据库信息。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MySQL> SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| example_db         |\n| information_schema |\n+--------------------+\n2 rows in set (0.00 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("code",[s._v("information_schema")]),s._v(" 是为了兼容 MySQL 协议而存在，实际中信息可能不是很准确，所以关于具体数据库的信息建议通过直接查询相应数据库而获得。")])]),s._v(" "),e("li",[e("p",[s._v("创建数据表")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Create-Table 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE.html"}},[s._v("Create-Table")]),s._v(" 命令手册。")],1)]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("CREATE TABLE")]),s._v(" 命令建立一个表(Table)。更多详细参数可以查看:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("HELP CREATE TABLE;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("首先切换数据库:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("USE example_db;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Doris 支持支持单分区和复合分区两种建表方式（详细区别请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE.html"}},[s._v("Create-Table")]),s._v(" 命令手册） 。")],1),s._v(" "),e("p",[s._v("下面以聚合模型为例，演示两种分区的建表语句。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("单分区")]),s._v(" "),e("p",[s._v("建立一个名字为 table1 的逻辑表。分桶列为 siteid，桶数为 10。")]),s._v(" "),e("p",[s._v("这个表的 schema 如下：")]),s._v(" "),e("ul",[e("li",[s._v("siteid：类型是INT（4字节）, 默认值为10")]),s._v(" "),e("li",[s._v("citycode：类型是 SMALLINT（2字节）")]),s._v(" "),e("li",[s._v("username：类型是 VARCHAR, 最大长度为32, 默认值为空字符串")]),s._v(" "),e("li",[s._v("pv：类型是 BIGINT（8字节）, 默认值是0; 这是一个指标列, Doris 内部会对指标列做聚合操作, 这个列的聚合方法是求和（SUM）")])]),s._v(" "),e("p",[s._v("建表语句如下:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE table1\n(\n    siteid INT DEFAULT '10',\n    citycode SMALLINT,\n    username VARCHAR(32) DEFAULT '',\n    pv BIGINT SUM DEFAULT '0'\n)\nAGGREGATE KEY(siteid, citycode, username)\nDISTRIBUTED BY HASH(siteid) BUCKETS 10\nPROPERTIES(\"replication_num\" = \"1\");\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("复合分区")]),s._v(" "),e("p",[s._v("建立一个名字为 table2 的逻辑表。")]),s._v(" "),e("p",[s._v("这个表的 schema 如下：")]),s._v(" "),e("ul",[e("li",[s._v("event_day：类型是DATE，无默认值")]),s._v(" "),e("li",[s._v("siteid：类型是 INT（4字节）, 默认值为10")]),s._v(" "),e("li",[s._v("citycode：类型是 SMALLINT（2字节）")]),s._v(" "),e("li",[s._v("username：类型是 VARCHAR, 最大长度为32, 默认值为空字符串")]),s._v(" "),e("li",[s._v("pv：类型是BIGINT（8字节）, 默认值是0; 这是一个指标列, Doris 内部会对指标列做聚合操作, 这个列的聚合方法是求和（SUM）")])]),s._v(" "),e("p",[s._v("我们使用 event_day 列作为分区列，建立3个分区: p201706, p201707, p201708")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("p201706：范围为 [最小值, 2017-07-01)")])]),s._v(" "),e("li",[e("p",[s._v("p201707：范围为 [2017-07-01, 2017-08-01)")])]),s._v(" "),e("li",[e("p",[s._v("p201708：范围为 [2017-08-01, 2017-09-01)")]),s._v(" "),e("blockquote",[e("p",[s._v("注意区间为左闭右开。")])])])]),s._v(" "),e("p",[s._v("每个分区使用 siteid 进行哈希分桶，桶数为10")]),s._v(" "),e("p",[s._v("建表语句如下:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE table2\n(\n    event_day DATE,\n    siteid INT DEFAULT '10',\n    citycode SMALLINT,\n    username VARCHAR(32) DEFAULT '',\n    pv BIGINT SUM DEFAULT '0'\n)\nAGGREGATE KEY(event_day, siteid, citycode, username)\nPARTITION BY RANGE(event_day)\n(\n    PARTITION p201706 VALUES LESS THAN ('2017-07-01'),\n    PARTITION p201707 VALUES LESS THAN ('2017-08-01'),\n    PARTITION p201708 VALUES LESS THAN ('2017-09-01')\n)\nDISTRIBUTED BY HASH(siteid) BUCKETS 10\nPROPERTIES(\"replication_num\" = \"1\");\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("表建完之后，可以查看 example_db 中表的信息:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MySQL> SHOW TABLES;\n+----------------------+\n| Tables_in_example_db |\n+----------------------+\n| table1               |\n| table2               |\n+----------------------+\n2 rows in set (0.01 sec)\n\nMySQL> DESC table1;\n+----------+-------------+------+-------+---------+-------+\n| Field    | Type        | Null | Key   | Default | Extra |\n+----------+-------------+------+-------+---------+-------+\n| siteid   | int(11)     | Yes  | true  | 10      |       |\n| citycode | smallint(6) | Yes  | true  | N/A     |       |\n| username | varchar(32) | Yes  | true  |         |       |\n| pv       | bigint(20)  | Yes  | false | 0       | SUM   |\n+----------+-------------+------+-------+---------+-------+\n4 rows in set (0.00 sec)\n\nMySQL> DESC table2;\n+-----------+-------------+------+-------+---------+-------+\n| Field     | Type        | Null | Key   | Default | Extra |\n+-----------+-------------+------+-------+---------+-------+\n| event_day | date        | Yes  | true  | N/A     |       |\n| siteid    | int(11)     | Yes  | true  | 10      |       |\n| citycode  | smallint(6) | Yes  | true  | N/A     |       |\n| username  | varchar(32) | Yes  | true  |         |       |\n| pv        | bigint(20)  | Yes  | false | 0       | SUM   |\n+-----------+-------------+------+-------+---------+-------+\n5 rows in set (0.00 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("blockquote",[e("p",[s._v("注意事项：")]),s._v(" "),e("ol",[e("li",[s._v("上述表通过设置 replication_num 建的都是单副本的表，Doris建议用户采用默认的 3 副本设置，以保证高可用。")]),s._v(" "),e("li",[s._v("可以对复合分区表动态的增删分区。详见 "),e("code",[s._v("HELP ALTER TABLE")]),s._v(" 中 Partition 相关部分。")]),s._v(" "),e("li",[s._v("数据导入可以导入指定的 Partition。详见 "),e("code",[s._v("HELP LOAD")]),s._v("。")]),s._v(" "),e("li",[s._v("可以动态修改表的 Schema。")]),s._v(" "),e("li",[s._v("可以对 Table 增加上卷表（Rollup）以提高查询性能，这部分可以参见高级使用指南关于 Rollup 的描述。")]),s._v(" "),e("li",[s._v("表的列的Null属性默认为true，会对查询性能有一定的影响。")])])])])])])]),s._v(" "),e("h4",{attrs:{id:"插入数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插入数据"}},[s._v("#")]),s._v(" 插入数据")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("Insert Into 插入")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Insert 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/INSERT.html"}},[s._v("Insert")]),s._v(" 命令手册。")],1)]),s._v(" "),e("p",[s._v("Insert Into 语句的使用方式和 MySQL 等数据库中 Insert Into 语句的使用方式类似。但在 Doris 中，所有的数据写入都是一个独立的导入作业。所以这里将 Insert Into 也作为一种导入方式介绍。")]),s._v(" "),e("p",[s._v("主要的 Insert Into 命令包含以下两种；")]),s._v(" "),e("ul",[e("li",[s._v("INSERT INTO tbl SELECT ...")]),s._v(" "),e("li",[s._v("INSERT INTO tbl (col1, col2, ...) VALUES (1, 2, ...), (1,3, ...);")])]),s._v(" "),e("p",[s._v("其中第二种命令仅用于 Demo，不要使用在测试或生产环境中。")]),s._v(" "),e("p",[s._v("Insert Into 命令需要通过 MySQL 协议提交，创建导入请求会同步返回导入结果。")]),s._v(" "),e("p",[s._v("语法：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("INSERT INTO table_name [partition_info] [WITH LABEL label] [col_list] [query_stmt] [VALUES];\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("示例：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('INSERT INTO tbl2 WITH LABEL label1 SELECT * FROM tbl3;\nINSERT INTO tbl1 VALUES ("qweasdzxcqweasdzxc"),("a");\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("注意")])]),s._v(" "),e("p",[s._v("当需要使用 "),e("code",[s._v("CTE(Common Table Expressions)")]),s._v(" 作为 insert 操作中的查询部分时，必须指定 "),e("code",[s._v("WITH LABEL")]),s._v(" 和 "),e("code",[s._v("column list")]),s._v(" 部分。示例")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("INSERT INTO tbl1 WITH LABEL label1\nWITH cte1 AS (SELECT * FROM tbl1), cte2 AS (SELECT * FROM tbl2)\nSELECT k1 FROM cte1 JOIN cte2 WHERE cte1.k1 = 1;\n\nINSERT INTO tbl1 (k1)\nWITH cte1 AS (SELECT * FROM tbl1), cte2 AS (SELECT * FROM tbl2)\nSELECT k1 FROM cte1 JOIN cte2 WHERE cte1.k1 = 1;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("Insert Into 本身就是一个 SQL 命令，其返回结果会根据执行结果的不同，分为以下几种：")]),s._v(" "),e("ul",[e("li",[s._v("如果返回结果为 "),e("code",[s._v("ERROR 1064 (HY000)")]),s._v("，则表示导入失败。")]),s._v(" "),e("li",[s._v("如果返回结果为"),e("code",[s._v("Query OK")]),s._v("，则表示执行成功。\n"),e("ul",[e("li",[s._v("如果 "),e("code",[s._v("rows affected")]),s._v(" 为 0，表示结果集为空，没有数据被导入。")]),s._v(" "),e("li",[s._v("如果"),e("code",[s._v("rows affected")]),s._v("大于 0：\n"),e("ul",[e("li",[s._v("如果 "),e("code",[s._v("status")]),s._v(" 为 "),e("code",[s._v("committed")]),s._v("，表示数据还不可见。需要通过 "),e("code",[s._v("show transaction")]),s._v(" 语句查看状态直到 "),e("code",[s._v("visible")])]),s._v(" "),e("li",[s._v("如果 "),e("code",[s._v("status")]),s._v(" 为 "),e("code",[s._v("visible")]),s._v("，表示数据导入成功。")])])]),s._v(" "),e("li",[s._v("如果 "),e("code",[s._v("warnings")]),s._v(" 大于 0，表示有数据被过滤，可以通过 "),e("code",[s._v("show load")]),s._v(" 语句获取 url 查看被过滤的行。")])])])]),s._v(" "),e("p",[s._v("更多详细说明，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/INSERT.html"}},[s._v("Insert")]),s._v(" 命令手册。")],1)]),s._v(" "),e("li",[e("p",[s._v("批量导入")]),s._v(" "),e("p",[s._v("Doris 支持多种数据导入方式。具体可以参阅数据导入文档。这里我们使用流式导入 (Stream-Load) 和 Broker-Load 导入做示例。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("Stream-Load")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Stream-Load 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD.html"}},[s._v("Stream-Load")]),s._v(" 命令手册。")],1)]),s._v(" "),e("p",[s._v("流式导入通过 HTTP 协议向 Doris 传输数据，可以不依赖其他系统或组件直接导入本地数据。详细语法帮助可以参阅 "),e("code",[s._v("HELP STREAM LOAD;")]),s._v("。")]),s._v(" "),e("p",[s._v('示例1：以 "table1_20170707" 为 Label，使用本地文件 table1_data 导入 table1 表。')]),s._v(" "),e("div",{staticClass:"language-CQL line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl --location-trusted -u test:test_passwd -H "label:table1_20170707" -H "column_separator:," -T table1_data http://FE_HOST:8030/api/example_db/table1/_stream_load\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("ol",[e("li",[s._v("FE_HOST 是任一 FE 所在节点 IP，8030 为 fe.conf 中的 http_port。")]),s._v(" "),e("li",[s._v("可以使用任一 BE 的 IP，以及 be.conf 中的 webserver_port 进行导入。如："),e("code",[s._v("BE_HOST:8040")])])])]),s._v(" "),e("p",[s._v("本地文件 "),e("code",[s._v("table1_data")]),s._v(" 以 "),e("code",[s._v(",")]),s._v(" 作为数据之间的分隔，具体内容如下：")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1,1,jim,2\n2,1,grace,2\n3,2,tom,2\n4,3,bush,3\n5,3,helen,3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v('示例2: 以 "table2_20170707" 为 Label，使用本地文件 table2_data 导入 table2 表。')]),s._v(" "),e("div",{staticClass:"language-CQL line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl --location-trusted -u test:test -H "label:table2_20170707" -H "column_separator:|" -T table2_data http://127.0.0.1:8030/api/example_db/table2/_stream_load\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("本地文件 "),e("code",[s._v("table2_data")]),s._v(" 以 "),e("code",[s._v("|")]),s._v(" 作为数据之间的分隔，具体内容如下：")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("2017-07-03|1|1|jim|2\n2017-07-05|2|1|grace|2\n2017-07-12|3|2|tom|2\n2017-07-15|4|3|bush|3\n2017-07-12|5|3|helen|3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("blockquote",[e("p",[s._v("注意事项：")]),s._v(" "),e("ol",[e("li",[s._v("采用流式导入建议文件大小限制在 10GB 以内，过大的文件会导致失败重试代价变大。")]),s._v(" "),e("li",[s._v("每一批导入数据都需要取一个 Label，Label 最好是一个和一批数据有关的字符串，方便阅读和管理。Doris 基于 Label 保证在一个Database 内，同一批数据只可导入成功一次。失败任务的 Label 可以重用。")]),s._v(" "),e("li",[s._v("流式导入是同步命令。命令返回成功则表示数据已经导入，返回失败表示这批数据没有导入。")])])])]),s._v(" "),e("li",[e("p",[s._v("Broker-Load")]),s._v(" "),e("p",[s._v("Broker 导入通过部署的 Broker 进程，读取外部存储上的数据进行导入。")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Broker Load 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Load/BROKER-LOAD.html"}},[s._v("Broker Load")]),s._v(" 命令手册，你也可以在 MySql 客户端命令行下输入 "),e("code",[s._v("HELP BROKER LOAD")]),s._v(" 获取更多帮助信息。")],1)]),s._v(" "),e("p",[s._v('示例：以 "table1_20170708" 为 Label，将 HDFS 上的文件导入 table1 表')]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('LOAD LABEL table1_20170708\n(\n    DATA INFILE("hdfs://your.namenode.host:port/dir/table1_data")\n    INTO TABLE table1\n)\nWITH BROKER hdfs \n(\n    "username"="hdfs_user",\n    "password"="hdfs_password"\n)\nPROPERTIES\n(\n    "timeout"="3600",\n    "max_filter_ratio"="0.1"\n);\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("Broker 导入是异步命令。以上命令执行成功只表示提交任务成功。导入是否成功需要通过 "),e("code",[s._v("SHOW LOAD;")]),s._v(" 查看。如：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('SHOW LOAD WHERE LABEL = "table1_20170708";\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("返回结果中，"),e("code",[s._v("State")]),s._v(" 字段为 FINISHED 则表示导入成功。")]),s._v(" "),e("p",[s._v("关于 "),e("code",[s._v("SHOW LOAD")]),s._v(" 的更多说明，可以参阅 "),e("code",[s._v("HELP SHOW LOAD;")])]),s._v(" "),e("p",[s._v("异步的导入任务在结束前可以取消：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('CANCEL LOAD WHERE LABEL = "table1_20170708";\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])]),s._v(" "),e("h4",{attrs:{id:"查询数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询数据"}},[s._v("#")]),s._v(" 查询数据")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("简单查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MySQL> SELECT * FROM table1 LIMIT 3;\n+--------+----------+----------+------+\n| siteid | citycode | username | pv   |\n+--------+----------+----------+------+\n|      2 |        1 | 'grace'  |    2 |\n|      5 |        3 | 'helen'  |    3 |\n|      3 |        2 | 'tom'    |    2 |\n+--------+----------+----------+------+\n3 rows in set (0.01 sec)\n\nMySQL> SELECT * FROM table1 ORDER BY citycode;\n+--------+----------+----------+------+\n| siteid | citycode | username | pv   |\n+--------+----------+----------+------+\n|      2 |        1 | 'grace'  |    2 |\n|      1 |        1 | 'jim'    |    2 |\n|      3 |        2 | 'tom'    |    2 |\n|      4 |        3 | 'bush'   |    3 |\n|      5 |        3 | 'helen'  |    3 |\n+--------+----------+----------+------+\n5 rows in set (0.01 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("Join查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MySQL> SELECT SUM(table1.pv) FROM table1 JOIN table2 WHERE table1.siteid = table2.siteid;\n+--------------------+\n| sum(`table1`.`pv`) |\n+--------------------+\n|                 12 |\n+--------------------+\n1 row in set (0.20 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("子查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MySQL> SELECT SUM(pv) FROM table2 WHERE siteid IN (SELECT siteid FROM table1 WHERE siteid > 2);\n+-----------+\n| sum(`pv`) |\n+-----------+\n|         8 |\n+-----------+\n1 row in set (0.13 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"更新数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新数据"}},[s._v("#")]),s._v(" 更新数据")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Update 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/UPDATE.html"}},[s._v("Update")]),s._v(" 命令手册。")],1)]),s._v(" "),e("p",[s._v("当前 UPDATE 语句"),e("strong",[s._v("仅支持")]),s._v("在 Unique 模型上的行更新，存在并发更新导致的数据冲突可能。 目前 Doris 并不处理这类问题，需要用户从业务侧规避这类问题。")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("语法规则")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("UPDATE table_name \n    SET assignment_list\n    WHERE expression\n\nvalue:\n    {expr | DEFAULT}\n\nassignment:\n    col_name = value\n\nassignment_list:\n    assignment [, assignment] ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[e("strong",[s._v("参数说明")])]),s._v(" "),e("ul",[e("li",[s._v("table_name: 待更新数据的目标表。可以是 'db_name.table_name' 形式")]),s._v(" "),e("li",[s._v("assignment_list: 待更新的目标列，形如 'col_name = value, col_name = value' 格式")]),s._v(" "),e("li",[s._v("where expression: 期望更新的条件，一个返回 true 或者 false 的表达式即可")])])]),s._v(" "),e("li",[e("p",[s._v("示例")]),s._v(" "),e("p",[e("code",[s._v("test")]),s._v(" 表是一个 unique 模型的表，包含: k1, k2, v1, v2 四个列。其中 k1, k2 是 key，v1, v2 是value，聚合方式是 Replace。")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("将 'test' 表中满足条件 k1 =1 , k2 =2 的 v1 列更新为 1")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" test "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" v1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" k1"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" k2"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("将 'test' 表中 k1=1 的列的 v1 列自增1")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" test "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" v1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" v1"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" k1"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])]),s._v(" "),e("h4",{attrs:{id:"删除数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除数据"}},[s._v("#")]),s._v(" 删除数据")]),s._v(" "),e("blockquote",[e("p",[s._v("关于 Delete 使用的更多详细语法及最佳实践，请参阅 "),e("RouterLink",{attrs:{to:"/zh-CN/docs/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/DELETE.html"}},[s._v("Delete")]),s._v(" 命令手册。")],1)]),s._v(" "),e("ol",[e("li",[e("p",[s._v("语法规则")]),s._v(" "),e("p",[s._v("该语句用于按条件删除指定 table（base index） partition 中的数据。")]),s._v(" "),e("p",[s._v("该操作会同时删除和此 base index 相关的 rollup index 的数据。\n语法：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" table_name "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" partition_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" PARTITIONS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\ncolumn_name1 op { "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" value_list } "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" column_name2 op { "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" value_list } "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("说明：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("op 的可选类型包括：=, >, <, >=, <=, !=, in, not in")])]),s._v(" "),e("li",[e("p",[s._v("只能指定 key 列上的条件。")])]),s._v(" "),e("li",[e("p",[s._v("当选定的 key 列不存在于某个 rollup 中时，无法进行 delete。")])]),s._v(" "),e("li",[e("p",[s._v("条件之间只能是“与”的关系。")]),s._v(" "),e("p",[s._v("若希望达成“或”的关系，需要将条件分写在两个 DELETE 语句中。")])]),s._v(" "),e("li",[e("p",[s._v("如果为分区表，可以指定分区，如不指定，且会话变量 delete_without_partition 为 true，则会应用到所有分区。如果是单分区表，可以不指定。")])])]),s._v(" "),e("p",[s._v("注意：")]),s._v(" "),e("ul",[e("li",[s._v("该语句可能会降低执行后一段时间内的查询效率。")]),s._v(" "),e("li",[s._v("影响程度取决于语句中指定的删除条件的数量。")]),s._v(" "),e("li",[s._v("指定的条件越多，影响越大。")])])]),s._v(" "),e("li",[e("p",[s._v("示例")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("删除 my_table partition p1 中 k1 列值为 3 的数据行")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" my_table "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p1 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" k1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v('删除 my_table partition p1 中 k1 列值大于等于 3 且 k2 列值为 "abc" 的数据行')]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" my_table "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p1 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" k1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" k2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"abc"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v('删除 my_table partition p1, p2 中 k1 列值大于等于 3 且 k2 列值为 "abc" 的数据行')]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" my_table PARTITIONS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" k1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" k2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"abc"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);